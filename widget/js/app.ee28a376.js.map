{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5597","webpack:///./src/components/AttrItem.vue?d687","webpack:///./src/components/WidgetList.vue?4abb","webpack:///./src/widget/WidgetText.vue?652b","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/widget/WidgetImage.vue?5b93","webpack:///./src/widget/WidgetDate.vue?cc1c","webpack:///./src/widget/ListWidget.vue?940d","webpack:///./src/App.vue","webpack:///./src/components/Editor.vue","webpack:///./src/types.ts","webpack:///./src/util/getTextSize.ts","webpack:///./src/util/apportion.ts","webpack:///./src/util/genRenderJS.ts","webpack:///./src/components/Editor.vue?e9d3","webpack:///./src/components/Editor.vue?ee02","webpack:///./src/components/WidgetList.vue","webpack:///./src/components/WidgetList.vue?97d8","webpack:///./src/components/WidgetList.vue?8710","webpack:///./src/components/AttrList.vue","webpack:///./src/util/genID.ts","webpack:///./src/components/AttrList.vue?5579","webpack:///./src/components/AttrList.vue?f6a1","webpack:///./src/widget/createWidget.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/widget/ListWidget.vue","webpack:///./src/util/getBase64Image.ts","webpack:///./src/widget/ListWidget.vue?7e1a","webpack:///./src/widget/ListWidget.vue?881a","webpack:///./src/widget/WidgetDate.vue","webpack:///./src/widget/WidgetDate.vue?4d20","webpack:///./src/widget/WidgetDate.vue?27a7","webpack:///./src/widget/WidgetText.vue","webpack:///./src/widget/WidgetText.vue?e852","webpack:///./src/widget/WidgetText.vue?f8cb","webpack:///./src/widget/WidgetImage.vue","webpack:///./src/widget/WidgetImage.vue?c221","webpack:///./src/widget/WidgetImage.vue?16fc","webpack:///./src/widget/WidgetSpacer.vue","webpack:///./src/widget/WidgetSpacer.vue?2bdf","webpack:///./src/widget/WidgetSpacer.vue?3a62","webpack:///./src/widget/WidgetStack.vue","webpack:///./src/widget/WidgetStack.vue?ba1c","webpack:///./src/widget/WidgetStack.vue?047e","webpack:///./src/widget/index.ts","webpack:///./src/components/AttrItem.vue","webpack:///./src/components/AttrItem.vue?2c4b","webpack:///./src/components/AttrItem.vue?152d","webpack:///./src/components/Node.vue","webpack:///./src/components/Node.vue?e8d3","webpack:///./src/components/Node.vue?a7da","webpack:///./src/main.ts","webpack:///./src/widget/WidgetSpacer.vue?f947","webpack:///./src/components/Node.vue?19a3","webpack:///./src/widget/WidgetStack.vue?99f6"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","class","state","rootWidget","realNodes","node","me","changeWidgetSize","handleRemove","handleExport","type","widgetType","Ornt","dataKey","text","targetOrnt","maxSize","fontSize","div","document","createElement","innerText","style","wordWrap","display","lineHeight","width","maxWidth","height","maxHeight","body","appendChild","getComputedStyle","removeChild","apportion","widget","context","handlers","STACK","fixedSize","X","attrs","size","Y","myMaxSize","paddingSize","padding","left","right","top","bottom","isFixed","myAlign","layout","myOtherAlign","parentAlign","nodesCopy","showNodes","spacerArray","hasFixed","lastLen","myCtx","forEach","index","array","SPACER","myRealSize","avgLen","spacer","some","IMAGE","contentMode","Math","floor","TEXT","otherAlign","font","assignLen","lineLimitLen","lineLimit","computedLen","getTextSize","realLen","min","otherAlignRealLen","otherAlignAssignLen","DATE","rate","rawImageSize","fixedHeight","imageSize","fixedWidth","resizable","maxLen","fixedLen","Number","myHeight","myWidth","childrenCopy","child","totalHeight","astStr","setup","STATE","sizes","small","medium","large","removeNode","targetID","curWidget","pruneAndCopy","ast","tagNameMap","ListWidget","WidgetDate","WidgetImage","WidgetSpacer","WidgetStack","WidgetText","tagName","LIST","children","bgImageDate","rawImageDate","fileName","content","genRenderJS","JSON","stringify","a","setAttribute","encodeURIComponent","click","render","draggable","handleDragStart","target","dataTransfer","setData","TYPEOFADDEDWIDGET","__scopeId","attr","keyName","config","model","myKey","date","valueType","minimumScaleFactor","shadowColor","shadowOffset","x","y","shadowRadius","textColor","textOpacity","url","options","日期","时间","计时器","相对","偏移","alignText","靠左","居中","靠右","image","borderColor","borderWidth","containerRelativeShape","是","否","imageOpacity","tint","color","opacity","适当","充满","alignImage","backgroundColor","backgroundGradient","colors","locations","angle","backgroundImage","refreshAfterDate","spacing","cornerRadius","横向布局","纵向布局","alignContent","顶部","底部","genID","widgetList","components","Editor","WidgetList","AttrList","createWidget","ref","handleDragOver","handleDrop","handleDragLeave","selectCurWidget","parentType","img","canvas","ctx","getContext","drawImage","toDataURL","props","required","myDOM","stopPropagation","preventDefault","childrenCount","lastTotalPadding","v","widgetSpacer","split","colorAndLocation","reduce","preValue","curValue","location","imageURL","bgImage","Image","onload","imageDate","getBase64Image","src","paddingTop","paddingLeft","paddingRight","paddingBottom","totalPadding","types","find","alignItems","deep","immediate","dropEffect","getData","newWidget","String","lastFontSize","lastLineLimit","lastMinScaleFactor","realHeight","realWidth","format","realFontSize","minFontSize","computedHeight","shadowValue","textShadow","alignSelf","lineCount","ceil","webkitLineClamp","handleLoad","widgetRef","imageRef","maskRef","borderRef","one","imgSrc","naturalHeight","naturalWidth","mask","border","lastSize","lastResizable","lastContentMode","nowSize","realWidgetWidth","realWidgetHeight","borderRadius","overflowWidth","overflowHeight","flexDirection","myModel","option","timer","undefined","set","clearInterval","setTimeout","Boolean","isShow","app","App","locale","component","AttrItem","Node","mount"],"mappings":"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","file":"js/app.ee28a376.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=b0d75fce&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AttrItem.vue?vue&type=style&index=0&id=33d457f0&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetList.vue?vue&type=style&index=0&id=2b570b7c&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetText.vue?vue&type=style&index=0&id=203f00cb&scoped=true&lang=css\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetImage.vue?vue&type=style&index=0&id=4d35acd8&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetDate.vue?vue&type=style&index=0&id=5ad30389&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ListWidget.vue?vue&type=style&index=0&id=22877752&scoped=true&lang=css\"","<template>\n\t<main>\n\t\t<div class=\"left\">\n\t\t\t<div class=\"up\"><Editor /></div>\n\t\t\t<div class=\"down\"><WidgetList /></div>\n\t\t</div>\n\t\t<div class=\"right\">\n\t\t\t<AttrList />\n\t\t</div>\n\t</main>\n\t<div v-for=\"node in state.rootWidget.realNodes\" :key=\"node.id\">\n\t\t<Node :me=\"node\"/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, provide, reactive } from 'vue';\nimport Editor from './components/Editor.vue';\nimport WidgetList from './components/WidgetList.vue';\nimport AttrList from './components/AttrList.vue';\nimport { Widget, widgetType, dataKey, State } from './types';\nimport createWidget from './widget/createWidget';\n\nexport default defineComponent({\n\tcomponents: { Editor, WidgetList, AttrList },\n\tsetup() {\n\t\tconst rootWidget: Widget = createWidget(widgetType.LIST);\n\t\tconst curWidget = reactive<Widget>(rootWidget);\n\t\t// 共享数据\n\t\tconst state = reactive<State>({\n\t\t\trootWidget,\n\t\t\tcurWidget,\n\t\t});\n\n\t\tprovide(dataKey.STATE, state);\n\t\treturn { state, widgetType };\n\t},\n});\n</script>\n\n<style scoped>\nmain {\n\tmargin: 10px auto;\n\tpadding: 20px;\n\twidth: 80%;\n\tbackground: yellow;\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n.left {\n\tflex-basis: 50%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n</style>\n","<template>\r\n\t<div>\r\n\t\t<button @click=\"changeWidgetSize('small')\">small</button>\r\n\t\t<button @click=\"changeWidgetSize('medium')\">medium</button>\r\n\t\t<button @click=\"changeWidgetSize('large')\">large</button>\r\n\t\t<button @click=\"handleRemove\">删除</button>\r\n\t\t<button @click=\"handleExport\">导出</button>\r\n\t\t<component :is=\"rootWidget.type\" :me=\"rootWidget\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject } from 'vue';\r\nimport {\r\n\tdataKey,\r\n\tListWidget,\r\n\tState,\r\n\tWidget,\r\n\tWidgetDate,\r\n\tWidgetImage,\r\n\tWidgetSpacer,\r\n\tWidgetStack,\r\n\tWidgetText,\r\n\twidgetType,\r\n} from '../types';\r\nimport apportion from '../util/apportion';\r\nimport genRenderJS from '../util/genRenderJS';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\t// 默认插入根组件\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\r\n\t\t// 改变组件大小\r\n\t\tconst changeWidgetSize = (type: string) => {\r\n\t\t\tconst sizes: any = {\r\n\t\t\t\tsmall: {\r\n\t\t\t\t\twidth: 149,\r\n\t\t\t\t\theight: 149,\r\n\t\t\t\t},\r\n\t\t\t\tmedium: {\r\n\t\t\t\t\twidth: 320,\r\n\t\t\t\t\theight: 149,\r\n\t\t\t\t},\r\n\t\t\t\tlarge: {\r\n\t\t\t\t\twidth: 320,\r\n\t\t\t\t\theight: 320,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\trootWidget.size.width = sizes[type].width;\r\n\t\t\trootWidget.size.height = sizes[type].height;\r\n\t\t\tapportion(rootWidget);\r\n\t\t};\r\n\r\n\t\t// 移除选中的Node\r\n\t\tconst removeNode = (widget: ListWidget | WidgetStack) => {\r\n\t\t\tconst targetID = state.curWidget.id;\r\n\t\t\twidget.realNodes.forEach((node, index, array) => {\r\n\t\t\t\tif (node.id === targetID) {\r\n\t\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (node.type === widgetType.STACK) {\r\n\t\t\t\t\tremoveNode(node as WidgetStack);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tconst handleRemove = () => {\r\n\t\t\tremoveNode(rootWidget);\r\n\t\t\tstate.curWidget = rootWidget;\r\n\t\t};\r\n\r\n\t\t// 导出widget\r\n\t\tconst pruneAndCopy = (widget: Widget) => {\r\n\t\t\tconst ast: any = {};\r\n\t\t\tconst tagNameMap = {\r\n\t\t\t\tListWidget: 'widget',\r\n\t\t\t\tWidgetDate: 'date',\r\n\t\t\t\tWidgetImage: 'image',\r\n\t\t\t\tWidgetSpacer: 'spacer',\r\n\t\t\t\tWidgetStack: 'stack',\r\n\t\t\t\tWidgetText: 'text',\r\n\t\t\t};\r\n\t\t\tast.tagName = tagNameMap[widget.type];\r\n\t\t\tast.attrs = widget.attrs;\r\n\t\t\tif (widget.type === widgetType.LIST || widget.type === widgetType.STACK) {\r\n\t\t\t\tconst me = widget as ListWidget | WidgetStack;\r\n\t\t\t\tast.children = me.realNodes.map(node => pruneAndCopy(node));\r\n\t\t\t\tast.attrs.bgImageDate = me.bgImageDate;\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.DATE || widget.type === widgetType.IMAGE) {\r\n\t\t\t\tconst me = widget as WidgetImage;\r\n\t\t\t\tast.children = [me.rawImageDate.slice(22)];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.TEXT) {\r\n\t\t\t\tconst me = widget as WidgetText;\r\n\t\t\t\tast.children = [me.attrs.text];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.SPACER) {\r\n\t\t\t\tconst me = widget as WidgetSpacer;\r\n\t\t\t\tast.children = [me.attrs.length];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst handleExport = () => {\r\n\t\t\tconst ast = pruneAndCopy(rootWidget);\r\n\t\t\tconst fileName = 'render.js';\r\n\t\t\tconst content = genRenderJS(JSON.stringify(ast));\r\n\t\t\tconst a = document.createElement('a');\r\n\t\t\ta.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));\r\n\t\t\ta.setAttribute('download', fileName);\r\n\t\t\ta.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\tdocument.body.removeChild(a);\r\n\t\t};\r\n\r\n\t\treturn { rootWidget, changeWidgetSize, handleRemove, handleExport };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","enum widgetType {\r\n\tLIST = 'ListWidget',\r\n\tDATE = 'WidgetDate',\r\n\tIMAGE = 'WidgetImage',\r\n\tSPACER = 'WidgetSpacer',\r\n\tSTACK = 'WidgetStack',\r\n\tTEXT = 'WidgetText',\r\n}\r\n\r\nenum Ornt {\r\n\tX = 'width',\r\n\tY = 'height',\r\n}\r\n\r\ninterface Widget {\r\n\tid: number;\r\n\ttype: widgetType;\r\n\tattrs: object;\r\n\tsize: {\r\n\t\t[Ornt.X]: number;\r\n\t\t[Ornt.Y]: number;\r\n\t};\r\n}\r\n\r\ninterface ListWidget extends Widget {\r\n\ttype: widgetType.LIST;\r\n\tbgImageDate: string;\r\n\tattrs: {\r\n\t\tbackgroundColor: string;\r\n\t\tbackgroundGradient: {\r\n\t\t\tcolors: string;\r\n\t\t\tlocations: string;\r\n\t\t\tangle: number;\r\n\t\t};\r\n\t\tbackgroundImage: string;\r\n\t\trefreshAfterDate: string;\r\n\t\tspacing: number;\r\n\t\turl: string;\r\n\t\tpadding: {\r\n\t\t\ttop: number;\r\n\t\t\tleft: number;\r\n\t\t\tbottom: number;\r\n\t\t\tright: number;\r\n\t\t};\r\n\t};\r\n\tshowNodes: Array<Widget>;\r\n\trealNodes: Array<Widget>;\r\n}\r\n\r\n// style：applyTimeStyle、applyTimerStyle、applyRelativeStyle、applyOffsetStyle、applyDateStyle\r\n// alignText：rightAlignText、leftAlignText、centerAlignText\r\ninterface WidgetDate extends Widget {\r\n\ttype: widgetType.DATE;\r\n\ttext: string;\r\n\tattrs: {\r\n\t\tdate: string;\r\n\t\tfont: {\r\n\t\t\tsize: number;\r\n\t\t\ttype: string;\r\n\t\t};\r\n\t\tlineLimit: number;\r\n\t\tminimumScaleFactor: number;\r\n\t\tshadowColor: string;\r\n\t\tshadowOffset: {\r\n\t\t\tx: number;\r\n\t\t\ty: number;\r\n\t\t};\r\n\t\tshadowRadius: number;\r\n\t\ttextColor: string;\r\n\t\ttextOpacity: number;\r\n\t\turl: string;\r\n\t\tstyle: string;\r\n\t\talignText: string;\r\n\t};\r\n}\r\n\r\ninterface WidgetText extends Widget {\r\n\ttype: widgetType.TEXT;\r\n\tattrs: {\r\n\t\ttext: string;\r\n\t\tfont: {\r\n\t\t\tsize: number;\r\n\t\t\ttype: string;\r\n\t\t};\r\n\t\tlineLimit: number;\r\n\t\tminimumScaleFactor: number;\r\n\t\tshadowColor: string;\r\n\t\tshadowOffset: {\r\n\t\t\tx: number;\r\n\t\t\ty: number;\r\n\t\t};\r\n\t\tshadowRadius: number;\r\n\t\ttextColor: string;\r\n\t\ttextOpacity: number;\r\n\t\turl: string;\r\n\t\talignText: string;\r\n\t};\r\n}\r\n\r\n// contentMode：applyFillingContentMode、applyFittingContentMode\r\n// alignImage：centerAlignImage、leftAlignImage、rightAlignImage\r\ninterface WidgetImage extends Widget {\r\n\ttype: widgetType.IMAGE;\r\n\tattrs: {\r\n\t\timage: string;\r\n\t\tborderColor: string;\r\n\t\tborderWidth: number;\r\n\t\tcontainerRelativeShape: boolean;\r\n\t\timageOpacity: number;\r\n\t\timageSize: {\r\n\t\t\t[Ornt.X]: number;\r\n\t\t\t[Ornt.Y]: number;\r\n\t\t};\r\n\t\tcornerRadius: number;\r\n\t\tresizable: boolean;\r\n\t\ttint: {\r\n\t\t\tcolor: string;\r\n\t\t\topacity: number;\r\n\t\t};\r\n\t\turl: string;\r\n\t\tcontentMode: string;\r\n\t\talignImage: string;\r\n\t};\r\n\trawImageDate: string;\r\n\trawImageSize: {\r\n\t\t[Ornt.X]: number;\r\n\t\t[Ornt.Y]: number;\r\n\t};\r\n}\r\n\r\ninterface WidgetSpacer extends Widget {\r\n\ttype: widgetType.SPACER;\r\n\tattrs: {\r\n\t\tlength: number;\r\n\t};\r\n}\r\n\r\n// layout：layoutVertically、layoutHorizontally\r\n// alignContent：bottomAlignContent、topAlignContent、centerAlignContent\r\ninterface WidgetStack extends Widget {\r\n\ttype: widgetType.STACK;\r\n\tbgImageDate: string;\r\n\tattrs: {\r\n\t\tsize: {\r\n\t\t\t[Ornt.X]: number;\r\n\t\t\t[Ornt.Y]: number;\r\n\t\t};\r\n\t\tbackgroundColor: string;\r\n\t\tbackgroundGradient: {\r\n\t\t\tcolors: string;\r\n\t\t\tlocations: string;\r\n\t\t\tangle: number;\r\n\t\t};\r\n\t\tbackgroundImage: string;\r\n\t\tborderColor: string;\r\n\t\tborderWidth: number;\r\n\t\tcornerRadius: number;\r\n\t\tspacing: number;\r\n\t\turl: string;\r\n\t\tpadding: {\r\n\t\t\ttop: number;\r\n\t\t\tleft: number;\r\n\t\t\tbottom: number;\r\n\t\t\tright: number;\r\n\t\t};\r\n\t\tlayout: Ornt;\r\n\t\talignContent: string;\r\n\t};\r\n\tshowNodes: Array<Widget>;\r\n\trealNodes: Array<Widget>;\r\n}\r\n\r\nenum dataKey {\r\n\tSTATE = 'state',\r\n\tTYPEOFADDEDWIDGET = 'typeOfAddedWidget',\r\n}\r\n\r\ninterface State {\r\n\trootWidget: Widget;\r\n\tcurWidget: Widget;\r\n}\r\n\r\nexport {\r\n\tWidget,\r\n\tListWidget,\r\n\tWidgetDate,\r\n\tWidgetStack,\r\n\tWidgetImage,\r\n\tWidgetSpacer,\r\n\tWidgetText,\r\n\twidgetType,\r\n\tdataKey,\r\n\tState,\r\n\tOrnt,\r\n};\r\n","import { Ornt } from '../types';\r\n\r\nexport default (\r\n\ttext: string,\r\n\ttargetOrnt: Ornt,\r\n\tmaxSize: {\r\n\t\t[Ornt.X]?: number;\r\n\t\t[Ornt.Y]?: number;\r\n\t},\r\n\tfontSize = 16\r\n) => {\r\n\tconst div = document.createElement('div');\r\n\tdiv.innerText = text;\r\n\tdiv.style.wordWrap = 'break-word';\r\n\tdiv.style.display = 'inline-block';\r\n\tdiv.style.fontSize = fontSize + 'px';\r\n\tdiv.style.lineHeight = fontSize + 'px';\r\n\r\n\tmaxSize.width && (div.style.maxWidth = maxSize.width + 'px');\r\n\tmaxSize.height && (div.style.maxHeight = maxSize.height + 'px');\r\n\r\n\tdocument.body.appendChild(div);\r\n\tconst result = +getComputedStyle(div)[targetOrnt].slice(0, -2);\r\n\tdocument.body.removeChild(div);\r\n\treturn result;\r\n};\r\n","import {\r\n\tOrnt,\r\n\tListWidget,\r\n\tWidget,\r\n\tWidgetStack,\r\n\tWidgetText,\r\n\twidgetType,\r\n\tWidgetImage,\r\n\tWidgetSpacer,\r\n\tWidgetDate,\r\n} from '../types';\r\nimport getTextSize from './getTextSize';\r\n\r\ninterface Context {\r\n\tparentAlign: Ornt;\r\n\tmaxSize: {\r\n\t\t// 允许子元素的最大长度\r\n\t\t[Ornt.X]: number;\r\n\t\t[Ornt.Y]: number;\r\n\t};\r\n}\r\n\r\n// TODO：会出现上下跳动的情况\r\n/* \tstack:\r\n\t\timage\r\n\t\ttext...\r\n\timage\r\n\ttext\r\n */\r\nfunction apportion(widget: Widget, context: Context) {\r\n\tconst handlers: any = {\r\n\t\t/* stack */\r\n\t\t[widgetType.STACK]: (widget: WidgetStack, context: Context) => {\r\n\t\t\t/**\r\n\t\t\t * 分配的实现思路：先根据每种情况写出代码，然后进行合并\r\n\t\t\t * padding的实现思路：\r\n\t\t\t * \t① 手动设定尺寸的容器：固定尺寸减去padding为可分配尺寸，容器尺寸为固定尺寸\r\n\t\t\t * \t② 非手动设定尺寸的容器：最大允许尺寸减去padding为可分配尺寸，容器尺寸为分配后尺寸加上padding\r\n\t\t\t * \t③ satck容器需设置css属性box-sizing为border-box\r\n\t\t\t */\r\n\r\n\t\t\t// 手动设置的尺寸\r\n\t\t\tconst fixedSize = {\r\n\t\t\t\t[Ornt.X]: widget.attrs.size.width,\r\n\t\t\t\t[Ornt.Y]: widget.attrs.size.height,\r\n\t\t\t};\r\n\t\t\t// 计算出当前容器的最大允许宽高，作为分配子元素的依据\r\n\t\t\tconst myMaxSize = {\r\n\t\t\t\t[Ornt.X]: fixedSize[Ornt.X] || context.maxSize[Ornt.X],\r\n\t\t\t\t[Ornt.Y]: fixedSize[Ornt.Y] || context.maxSize[Ornt.Y],\r\n\t\t\t};\r\n\t\t\t// 可分配尺寸减去padding\r\n\t\t\tconst paddingSize = {\r\n\t\t\t\t[Ornt.X]: widget.attrs.padding.left + widget.attrs.padding.right,\r\n\t\t\t\t[Ornt.Y]: widget.attrs.padding.top + widget.attrs.padding.bottom,\r\n\t\t\t};\r\n\t\t\tmyMaxSize.width -= paddingSize.width;\r\n\t\t\tmyMaxSize.height -= paddingSize.height;\r\n\t\t\tif (myMaxSize.width < 0) myMaxSize.width = 0;\r\n\t\t\tif (myMaxSize.height < 0) myMaxSize.height = 0;\r\n\r\n\t\t\tconst myAlign = widget.attrs.layout;\r\n\t\t\tconst myOtherAlign = myAlign === Ornt.X ? Ornt.Y : Ornt.X;\r\n\t\t\tconst parentAlign = context.parentAlign;\r\n\t\t\t// 对子元素进行分配（不包括无约束的spacer元素）\r\n\t\t\tconst nodesCopy = widget.showNodes.map(n => n);\r\n\t\t\tconst spacerArray: Array<WidgetSpacer> = [];\r\n\t\t\tlet hasFixed = true;\r\n\t\t\tlet lastLen = myMaxSize[myAlign];\r\n\t\t\tconst myCtx = {\r\n\t\t\t\tparentAlign: myAlign,\r\n\t\t\t\tmaxSize: { width: 0, height: 0 },\r\n\t\t\t};\r\n\t\t\tlet isFixed: boolean;\r\n\t\t\twhile (hasFixed) {\r\n\t\t\t\thasFixed = false;\r\n\t\t\t\tmyCtx.maxSize[myAlign] = lastLen / nodesCopy.length;\r\n\t\t\t\tmyCtx.maxSize[myOtherAlign] = myMaxSize[myOtherAlign];\r\n\r\n\t\t\t\tnodesCopy.forEach((node, index, array) => {\r\n\t\t\t\t\tisFixed = apportion(node, myCtx);\r\n\t\t\t\t\tif (isFixed) {\r\n\t\t\t\t\t\tlastLen -= node.size[myAlign];\r\n\t\t\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\t\t\thasFixed = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (node.type === widgetType.SPACER) {\r\n\t\t\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\t\t\tspacerArray.push(node as WidgetSpacer);\r\n\t\t\t\t\t\thasFixed = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 依据所有子元素的宽高，决定当前容器的尺寸\r\n\t\t\tconst myRealSize = {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t};\r\n\t\t\twidget.showNodes.forEach(node => {\r\n\t\t\t\tmyRealSize[myAlign] += node.size[myAlign];\r\n\t\t\t\tif (node.size[myOtherAlign] > myRealSize[myOtherAlign]) {\r\n\t\t\t\t\tmyRealSize[myOtherAlign] = node.size[myOtherAlign];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// 对无约束的spacer元素进行分配（因为spacer不参与上面的分配）\r\n\t\t\tif (spacerArray.length > 0) {\r\n\t\t\t\tconst avgLen = (myMaxSize[myAlign] - myRealSize[myAlign]) / spacerArray.length;\r\n\t\t\t\tspacerArray.forEach(spacer => {\r\n\t\t\t\t\tspacer.size[myAlign] = avgLen;\r\n\t\t\t\t\tmyRealSize[myAlign] += avgLen;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 将减去的padding加回去\r\n\t\t\twidget.size[myAlign] = fixedSize[myAlign] || myRealSize[myAlign] + paddingSize[myAlign] || 50;\r\n\t\t\twidget.size[myOtherAlign] =\r\n\t\t\t\tfixedSize[myOtherAlign] || myRealSize[myOtherAlign] + paddingSize[myOtherAlign] || 50;\r\n\t\t\t// 依据当前容器所得到的尺寸，决定该容器是固定元素，还是自由元素\r\n\t\t\tif (fixedSize[parentAlign]) return true;\r\n\r\n\t\t\t// 处理其中采用fill模式图片的情况\r\n\t\t\tif (\r\n\t\t\t\twidget.realNodes.some(node => {\r\n\t\t\t\t\tif (node.type === widgetType.IMAGE) {\r\n\t\t\t\t\t\treturn (node as WidgetImage).attrs.contentMode === 'fill';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t})\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// \ttodo：用取整的方法简单处理计算误差造成的BUG\r\n\t\t\tif (Math.floor(myRealSize[myOtherAlign]) !== Math.floor(context.maxSize[parentAlign])) return true;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/* text */\r\n\t\t[widgetType.TEXT]: (widget: WidgetText | WidgetDate, context: Context) => {\r\n\t\t\tconst parentAlign = context.parentAlign;\r\n\t\t\tconst otherAlign = parentAlign == Ornt.X ? Ornt.Y : Ornt.X;\r\n\t\t\tconst text = (widget as WidgetText).attrs.text || (widget as WidgetDate).text;\r\n\t\t\tconst fontSize = widget.attrs.font.size;\r\n\r\n\t\t\tconst assignLen = context.maxSize[parentAlign];\r\n\t\t\tconst lineLimitLen = fontSize * widget.attrs.lineLimit;\r\n\t\t\tconst computedLen = getTextSize(text, parentAlign, { [otherAlign]: context.maxSize[otherAlign] }, fontSize);\r\n\t\t\tlet realLen = computedLen;\r\n\t\t\tif (parentAlign === Ornt.Y && lineLimitLen > 0) {\r\n\t\t\t\trealLen = Math.min(computedLen, lineLimitLen);\r\n\t\t\t}\r\n\r\n\t\t\t// 按固定元素分配\r\n\t\t\tif (realLen < assignLen) {\r\n\t\t\t\twidget.size[otherAlign] = getTextSize(\r\n\t\t\t\t\ttext,\r\n\t\t\t\t\totherAlign,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t[otherAlign]: context.maxSize[otherAlign],\r\n\t\t\t\t\t\t[parentAlign]: realLen,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfontSize\r\n\t\t\t\t);\r\n\t\t\t\twidget.size[parentAlign] = realLen;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// 按自由元素分配\r\n\t\t\tconst otherAlignRealLen = getTextSize(text, otherAlign, context.maxSize, fontSize);\r\n\t\t\tconst otherAlignAssignLen = context.maxSize[otherAlign];\r\n\t\t\tif (parentAlign === Ornt.X && lineLimitLen > 0) {\r\n\t\t\t\twidget.size[otherAlign] = Math.min(otherAlignRealLen, otherAlignAssignLen, lineLimitLen);\r\n\t\t\t} else {\r\n\t\t\t\twidget.size[otherAlign] = Math.min(otherAlignRealLen, otherAlignAssignLen);\r\n\t\t\t}\r\n\t\t\twidget.size[parentAlign] = assignLen;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/* date */\r\n\t\t[widgetType.DATE]: (widget: WidgetDate, context: Context) => {\r\n\t\t\treturn handlers[widgetType.TEXT](widget, context);\r\n\t\t},\r\n\t\t/* image */\r\n\t\t[widgetType.IMAGE]: (widget: WidgetImage, context: Context) => {\r\n\t\t\tconst parentAlign = context.parentAlign;\r\n\t\t\tconst otherAlign = parentAlign === Ornt.X ? Ornt.Y : Ornt.X;\r\n\t\t\tconst rate = widget.rawImageSize[parentAlign] / widget.rawImageSize[otherAlign];\r\n\r\n\t\t\t// 按手动设置的尺寸分配\r\n\t\t\tconst fixedHeight = widget.attrs.imageSize[Ornt.Y];\r\n\t\t\tconst fixedWidth = widget.attrs.imageSize[Ornt.X];\r\n\t\t\tif (fixedHeight > 0 || fixedWidth > 0) {\r\n\t\t\t\twidget.size[Ornt.X] = fixedWidth;\r\n\t\t\t\twidget.size[Ornt.Y] = fixedHeight;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// 如果图片不能缩放，则保持原始尺寸\r\n\t\t\tif (!widget.attrs.resizable) {\r\n\t\t\t\twidget.size[Ornt.X] = widget.rawImageSize[Ornt.X];\r\n\t\t\t\twidget.size[Ornt.Y] = widget.rawImageSize[Ornt.Y];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// 如果图片采用fill模式填充\r\n\t\t\tif (widget.attrs.contentMode === 'fill') {\r\n\t\t\t\tlet maxLen = rate * context.maxSize[otherAlign];\r\n\t\t\t\tif (maxLen > context.maxSize[parentAlign]) {\r\n\t\t\t\t\twidget.size[otherAlign] = context.maxSize[otherAlign];\r\n\t\t\t\t\twidget.size[parentAlign] = maxLen;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmaxLen = (1 / rate) * context.maxSize[parentAlign];\r\n\t\t\t\t\twidget.size[otherAlign] = maxLen;\r\n\t\t\t\t\twidget.size[parentAlign] = context.maxSize[parentAlign];\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 按固定元素分配\r\n\t\t\tconst realLen = rate * context.maxSize[otherAlign];\r\n\t\t\tif (realLen <= context.maxSize[parentAlign]) {\r\n\t\t\t\twidget.size[otherAlign] = context.maxSize[otherAlign];\r\n\t\t\t\twidget.size[parentAlign] = realLen;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// 按自由元素分配\r\n\t\t\twidget.size[otherAlign] = (1 / rate) * context.maxSize[parentAlign];\r\n\t\t\twidget.size[parentAlign] = context.maxSize[parentAlign];\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/* spacer */\r\n\t\t[widgetType.SPACER]: (widget: WidgetSpacer, context: Context) => {\r\n\t\t\tconst parentAlign = context.parentAlign;\r\n\t\t\tconst otherAlign = parentAlign === Ornt.X ? Ornt.Y : Ornt.X;\r\n\t\t\tconst fixedLen = Number(widget.attrs.length);\r\n\t\t\tif (fixedLen) {\r\n\t\t\t\twidget.size[parentAlign] = fixedLen;\r\n\t\t\t\twidget.size[otherAlign] = 0;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\twidget.size[parentAlign] = 0;\r\n\t\t\twidget.size[otherAlign] = 0;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t};\r\n\r\n\treturn handlers[widget.type](widget, context);\r\n}\r\n\r\n// 入口\r\nexport default (widget: ListWidget) => {\r\n\tconst myHeight = widget.size.height - widget.attrs.padding.top - widget.attrs.padding.bottom;\r\n\tconst myWidth = widget.size.width - widget.attrs.padding.left - widget.attrs.padding.right;\r\n\r\n\tconst childrenCopy: Array<Widget> = widget.showNodes.map(n => n);\r\n\tconst spacerArray: Array<WidgetSpacer> = [];\r\n\tlet hasFixed = true;\r\n\tlet lastLen = myHeight;\r\n\tlet context: Context;\r\n\tlet isFixed: boolean;\r\n\twhile (hasFixed) {\r\n\t\thasFixed = false;\r\n\t\tcontext = {\r\n\t\t\tparentAlign: Ornt.Y,\r\n\t\t\tmaxSize: {\r\n\t\t\t\t[Ornt.X]: myWidth,\r\n\t\t\t\t[Ornt.Y]: lastLen / childrenCopy.length,\r\n\t\t\t},\r\n\t\t};\r\n\t\tchildrenCopy.forEach((child, index, array) => {\r\n\t\t\tisFixed = apportion(child, context);\r\n\t\t\tif (isFixed) {\r\n\t\t\t\tlastLen -= child.size[Ornt.Y];\r\n\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\thasFixed = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (child.type === widgetType.SPACER) {\r\n\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\tspacerArray.push(child as WidgetSpacer);\r\n\t\t\t\thasFixed = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlet totalHeight = 0;\r\n\twidget.showNodes.forEach(node => {\r\n\t\ttotalHeight += node.size.height;\r\n\t});\r\n\tif (spacerArray.length > 0) {\r\n\t\tconst avgLen = (myHeight - totalHeight) / spacerArray.length;\r\n\t\tspacerArray.forEach(spacer => {\r\n\t\t\tspacer.size[Ornt.Y] = avgLen;\r\n\t\t\tspacer.size[Ornt.X] = 0;\r\n\t\t});\r\n\t}\r\n};\r\n","export default (astStr: string) => {\r\n\treturn `\r\n    class Context {\r\n        constructor(data) {\r\n            this.data = data || {};\r\n        }\r\n        push(newData) {\r\n            let copyData = {};\r\n            for (let k in this.data) {\r\n                copyData[k] = this.data[k];\r\n            }\r\n            for (let k in newData) {a\r\n                copyData[k] = newData[k];\r\n            }\r\n            return new Context(copyData);\r\n        }\r\n        pop() {\r\n            return this.data;\r\n        }\r\n    }\r\n    \r\n    class Render {\r\n        constructor(ast) {\r\n            this.ast = ast;\r\n        }\r\n    \r\n        async show() {\r\n            const type = config.widgetFamily;\r\n            if (type) {\r\n                Script.setWidget(this.render(ast));\r\n                return;\r\n            }\r\n            const opts = ['small', 'medium', 'large'];\r\n            const funcs = ['presentSmall', 'presentMedium', 'presentLarge'];\r\n            const index = await generateAlert('预览大小', opts);\r\n            await this.render(ast)[funcs[index]]();\r\n        }\r\n    \r\n        render(ast) {\r\n            const hdlFuncSet = {\r\n                stack(me, parent, ctx) {\r\n                    const stack = parent.addStack();\r\n                    applyAttrs(stack, me.attrs, ctx);\r\n                    me.children.forEach(child => {\r\n                        process(child, stack, ctx);\r\n                    });\r\n                },\r\n                image(me, parent, ctx) {\r\n                    const imageData = Data.fromBase64String(me.children[0]);\r\n                    const image = Image.fromData(imageData);\r\n                    applyAttrs(parent.addImage(image), me.attrs, ctx);\r\n                },\r\n                text(me, parent, ctx) {\r\n                    let match,\r\n                        array = [],\r\n                        str = me.children[0];\r\n                    while ((match = str.match(/\\\\{\\\\{.*?\\\\}\\\\}/))) {\r\n                        array.push(str.substring(0, match.index));\r\n                        array.push(echo(match[0], ctx));\r\n                        str = str.substring(match.index + match[0].length);\r\n                    }\r\n                    array.push(str);\r\n                    applyAttrs(parent.addText(array.join('')), me.attrs, ctx);\r\n                },\r\n                date(me, parent, ctx) {\r\n                    applyAttrs(parent.addDate(new Date(echo(me.attrs.date, ctx))), me.attrs, ctx);\r\n                },\r\n                spacer(me, parent, ctx) {\r\n                    parent.addSpacer(echo(me.children[0] || null, ctx));\r\n                },\r\n            };\r\n            const that = this;\r\n            const ctx = new Context({});\r\n            const root = ast;\r\n            const widget = new ListWidget();\r\n            applyAttrs(widget, root.attrs, ctx);\r\n            root.children.forEach(child => process(child, widget, ctx));\r\n            return widget;\r\n    \r\n            function process(me, parent, ctx) {\r\n                const func = hdlFuncSet[me.tagName];\r\n                func && func(me, parent, ctx);\r\n            }\r\n    \r\n            function echo(exp, ctx) {\r\n                if (typeof exp !== 'string') return exp; // not string\r\n                const match = exp.match(/\\\\{\\\\{\\\\s*([^\\\\s]+)\\\\s*\\\\}\\\\}/);\r\n                if (!match) return exp; // not exp\r\n                exp = match[1];\r\n                const data = ctx.pop();\r\n                let str = '{';\r\n                if (Object.keys(data).length !== 0) {\r\n                    for (let k in data) {\r\n                        str += k + ',';\r\n                    }\r\n                    str = str.substring(0, str.length - 1) + '}';\r\n                } else {\r\n                    str = '{}';\r\n                }\r\n                return new Function(\r\n                    'data',\r\n                    \\`const \\${str}={...data};return \\${exp};\\`\r\n                )(data);\r\n            }\r\n    \r\n            function applyAttrs(ele, attrs, ctx) {\r\n                for (let key in attrs) {\r\n                    if (!key) return;\r\n                    that.getAttrFunc(key)?.apply(null, [ele].concat(echo(attrs[key], ctx)));\r\n                }\r\n            }\r\n        }\r\n    \r\n        getAttrFunc(key) {\r\n            console.log(\"======\" + key + \"======\")\r\n            return {\r\n                // property:\r\n                // widget、stack\r\n                backgroundColor(obj, color) {\r\n                    obj.backgroundColor = new Color(color);\r\n                },\r\n                backgroundGradient(obj, gradVal) {\r\n                    if (gradVal.colors === \"\" || gradVal.locations === \"\") return;\r\n                    const lg = new LinearGradient()\r\n                    lg.colors = gradVal.colors.split(',').map(c => new Color(c))\r\n                    lg.locations = gradVal.locations.split(',').map(l => Number(l))\r\n                    lg.startPoint = new Point(0, 0)\r\n                    lg.endPoint = new Point(Math.sin(gradVal.angle), Math.cos(gradVal.angle))\r\n                    obj.backgroundGradient = lg;\r\n                },\r\n                bgImageDate(obj, base64ImageDate) {\r\n                    const imageDate = Data.fromBase64String(base64ImageDate)\r\n                    const image = Image.fromData(imageDate)\r\n                    obj.backgroundImage = image;\r\n                },\r\n                spacing(obj, number) {\r\n                    obj.spacing = number;\r\n                },\r\n                // stack\r\n                size(obj, size) {\r\n                    obj.size = new Size(size.width, size.height);\r\n                },\r\n                // widget\r\n                refreshAfterDate(obj, date) {\r\n                    obj.refreshAfterDate = new Date(date);\r\n                },\r\n                // common\r\n                url(obj, url) {\r\n                    obj.url = url;\r\n                },\r\n                // text、date\r\n                font(obj, font) {\r\n                    obj.font = new Font(font.type, font.size);\r\n                },\r\n                lineLimit(obj, number) {\r\n                    obj.lineLimit = number;\r\n                },\r\n                minimumScaleFactor(obj, number) {\r\n                    obj.minimumScaleFactor = number;\r\n                },\r\n                shadowColor(obj, color) {\r\n                    obj.shadowColor = new Color(color);\r\n                },\r\n                shadowOffset(obj, offset) {\r\n                    obj.shadowOffset = new Point(offset.x, offset.y);\r\n                },\r\n                shadowRadius(obj, radius) {\r\n                    obj.shadowRadius = radius;\r\n                },\r\n                textColor(obj, color) {\r\n                    obj.textColor = new Color(color);\r\n                },\r\n                textOpacity(obj, opacity) {\r\n                    obj.textOpacity = opacity;\r\n                },\r\n                // stack、image\r\n                borderColor(obj, color) {\r\n                    obj.borderColor = new Color(color);\r\n                },\r\n                borderWidth(obj, width) {\r\n                    obj.borderWidth = width;\r\n                },\r\n                cornerRadius(obj, radius) {\r\n                    obj.cornerRadius = radius;\r\n                },\r\n                // image\r\n                containerRelativeShape(obj, bool) {\r\n                    obj.containerRelativeShape = bool;\r\n                },\r\n                imageOpacity(obj, opacity) {\r\n                    obj.imageOpacity = opacity;\r\n                },\r\n                imageSize(obj, size) {\r\n                    if (size.width > 0 && size.height > 0)\r\n                        obj.imageSize = new Size(size.width, size.height);\r\n                },\r\n                resizable(obj, bool) {\r\n                    obj.resizable = bool;\r\n                },\r\n                tintColor(obj, color) {\r\n                    obj.tintColor = new Color(color);\r\n                },\r\n                // methods:\r\n                // stack、widget\r\n                padding(obj, padding) {\r\n                    obj.setPadding(padding.top, padding.left, padding.bottom, padding.right);\r\n                },\r\n                // stack\r\n                alignContent(obj, type) {\r\n                    const typeMap = {\r\n                        'flex-start': 'topAlignContent',\r\n                        'flex-end': 'bottomAlignContent',\r\n                        'center': 'centerAlignContent',\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                },\r\n                layout(obj, type) {\r\n                    const typeMap = {\r\n                        width: 'layoutHorizontally',\r\n                        height: 'layoutVertically'\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                },\r\n                // text、date\r\n                alignText(obj, type) {\r\n                    const typeMap = {\r\n                        'flex-start': 'leftAlignText',\r\n                        'flex-end': 'rightAlignText',\r\n                        'center': 'centerAlignText',\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                },\r\n                // Image\r\n                alignImage(obj, type) {\r\n                    const typeMap = {\r\n                        'flex-start': 'leftAlignImage',\r\n                        'flex-end': 'rightAlignImage',\r\n                        'center': 'centerAlignImage',\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                },\r\n                contentMode(obj, type) {\r\n                    const typeMap = {\r\n                        fit: 'applyFittingContentMode',\r\n                        fill: 'applyFillingContentMode',\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                },\r\n                // date\r\n                style(obj, type) {\r\n                    const typeMap = {\r\n                        date: 'applyDateStyle',\r\n                        time: 'applyTimeStyle',\r\n                        timer: 'applyTimerStyle',\r\n                        relative: 'applyRelativeStyle',\r\n                        offset: 'applyOffsetStyle',\r\n                    }\r\n                    obj[typeMap[type]]()\r\n                }\r\n            }[key];\r\n        }\r\n    }\r\n    \r\n    async function generateAlert(message, options) {\r\n        let alert = new Alert();\r\n        alert.message = message;\r\n        for (const option of options) {\r\n            alert.addAction(option);\r\n        }\r\n        return await alert.presentAlert();\r\n    }\r\n    \r\n    const ast = JSON.parse('${astStr}')\r\n    const render = new Render(ast)\r\n    await render.show()\r\n    Script.complete()    \r\n    `;\r\n};\r\n","\r\nimport { defineComponent, inject } from 'vue';\r\nimport {\r\n\tdataKey,\r\n\tListWidget,\r\n\tState,\r\n\tWidget,\r\n\tWidgetDate,\r\n\tWidgetImage,\r\n\tWidgetSpacer,\r\n\tWidgetStack,\r\n\tWidgetText,\r\n\twidgetType,\r\n} from '../types';\r\nimport apportion from '../util/apportion';\r\nimport genRenderJS from '../util/genRenderJS';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\t// 默认插入根组件\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\r\n\t\t// 改变组件大小\r\n\t\tconst changeWidgetSize = (type: string) => {\r\n\t\t\tconst sizes: any = {\r\n\t\t\t\tsmall: {\r\n\t\t\t\t\twidth: 149,\r\n\t\t\t\t\theight: 149,\r\n\t\t\t\t},\r\n\t\t\t\tmedium: {\r\n\t\t\t\t\twidth: 320,\r\n\t\t\t\t\theight: 149,\r\n\t\t\t\t},\r\n\t\t\t\tlarge: {\r\n\t\t\t\t\twidth: 320,\r\n\t\t\t\t\theight: 320,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\trootWidget.size.width = sizes[type].width;\r\n\t\t\trootWidget.size.height = sizes[type].height;\r\n\t\t\tapportion(rootWidget);\r\n\t\t};\r\n\r\n\t\t// 移除选中的Node\r\n\t\tconst removeNode = (widget: ListWidget | WidgetStack) => {\r\n\t\t\tconst targetID = state.curWidget.id;\r\n\t\t\twidget.realNodes.forEach((node, index, array) => {\r\n\t\t\t\tif (node.id === targetID) {\r\n\t\t\t\t\tarray.splice(index, 1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (node.type === widgetType.STACK) {\r\n\t\t\t\t\tremoveNode(node as WidgetStack);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tconst handleRemove = () => {\r\n\t\t\tremoveNode(rootWidget);\r\n\t\t\tstate.curWidget = rootWidget;\r\n\t\t};\r\n\r\n\t\t// 导出widget\r\n\t\tconst pruneAndCopy = (widget: Widget) => {\r\n\t\t\tconst ast: any = {};\r\n\t\t\tconst tagNameMap = {\r\n\t\t\t\tListWidget: 'widget',\r\n\t\t\t\tWidgetDate: 'date',\r\n\t\t\t\tWidgetImage: 'image',\r\n\t\t\t\tWidgetSpacer: 'spacer',\r\n\t\t\t\tWidgetStack: 'stack',\r\n\t\t\t\tWidgetText: 'text',\r\n\t\t\t};\r\n\t\t\tast.tagName = tagNameMap[widget.type];\r\n\t\t\tast.attrs = widget.attrs;\r\n\t\t\tif (widget.type === widgetType.LIST || widget.type === widgetType.STACK) {\r\n\t\t\t\tconst me = widget as ListWidget | WidgetStack;\r\n\t\t\t\tast.children = me.realNodes.map(node => pruneAndCopy(node));\r\n\t\t\t\tast.attrs.bgImageDate = me.bgImageDate;\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.DATE || widget.type === widgetType.IMAGE) {\r\n\t\t\t\tconst me = widget as WidgetImage;\r\n\t\t\t\tast.children = [me.rawImageDate.slice(22)];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.TEXT) {\r\n\t\t\t\tconst me = widget as WidgetText;\r\n\t\t\t\tast.children = [me.attrs.text];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t\tif (widget.type === widgetType.SPACER) {\r\n\t\t\t\tconst me = widget as WidgetSpacer;\r\n\t\t\t\tast.children = [me.attrs.length];\r\n\t\t\t\treturn ast;\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst handleExport = () => {\r\n\t\t\tconst ast = pruneAndCopy(rootWidget);\r\n\t\t\tconst fileName = 'render.js';\r\n\t\t\tconst content = genRenderJS(JSON.stringify(ast));\r\n\t\t\tconst a = document.createElement('a');\r\n\t\t\ta.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));\r\n\t\t\ta.setAttribute('download', fileName);\r\n\t\t\ta.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\tdocument.body.removeChild(a);\r\n\t\t};\r\n\r\n\t\treturn { rootWidget, changeWidgetSize, handleRemove, handleExport };\r\n\t},\r\n});\r\n","import { render } from \"./Editor.vue?vue&type=template&id=ca2b1d00\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"compList\" @dragstart=\"handleDragStart\">\r\n\t\t<div draggable=\"true\">{{ widgetType.TEXT }}</div>\r\n\t\t<div draggable=\"true\">{{ widgetType.DATE }}</div>\r\n\t\t<div draggable=\"true\">{{ widgetType.IMAGE }}</div>\r\n\t\t<div draggable=\"true\">{{ widgetType.STACK }}</div>\r\n\t\t<div draggable=\"true\">{{ widgetType.SPACER }}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport { widgetType, dataKey } from '../types';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\tconst handleDragStart = (e: DragEvent) => {\r\n\t\t\tconst target = e.target as HTMLElement;\r\n\t\t\tconst type = target.innerText;\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tdataTransfer.setData(dataKey.TYPEOFADDEDWIDGET, type);\r\n\t\t};\r\n\t\treturn { widgetType, handleDragStart };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.compList {\r\n\tmargin-top: 20px;\r\n\tborder: hotpink 2px solid;\r\n}\r\n.compList div {\r\n\tborder: 1px brown solid;\r\n\tmargin: 5px;\r\n\tpadding: 2px;\r\n\twidth: min-content;\r\n\tcursor: grab;\r\n}\r\n.compList div:active {\r\n\tcursor: grabbing;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from 'vue';\r\nimport { widgetType, dataKey } from '../types';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\tconst handleDragStart = (e: DragEvent) => {\r\n\t\t\tconst target = e.target as HTMLElement;\r\n\t\t\tconst type = target.innerText;\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tdataTransfer.setData(dataKey.TYPEOFADDEDWIDGET, type);\r\n\t\t};\r\n\t\treturn { widgetType, handleDragStart };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetList.vue?vue&type=template&id=2b570b7c&scoped=true\"\nimport script from \"./WidgetList.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetList.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetList.vue?vue&type=style&index=0&id=2b570b7c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2b570b7c\"\n\nexport default script","<template>\r\n\t<h3>{{ state.curWidget.type }}</h3>\r\n\t<div v-for=\"(attr, keyName) in state.curWidget.attrs\" :key=\"state.curWidget.id + keyName\">\r\n\t\t<AttrItem :config=\"map[keyName]\" :model=\"state.curWidget.attrs\" :myKey=\"keyName\" :id=\"state.curWidget.id\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject } from 'vue';\r\nimport { dataKey, Ornt, State } from '../types';\r\nimport genID from '../util/genID';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst map = {\r\n\t\t\tdate: {\r\n\t\t\t\tname: '日期',\r\n\t\t\t\ttype: 'datetime-local',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tfont: {\r\n\t\t\t\tname: '字体',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tsize: {\r\n\t\t\t\t\t\tname: '大小',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: {\r\n\t\t\t\t\t\tname: '类型',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlineLimit: {\r\n\t\t\t\tname: '行数限制',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tminimumScaleFactor: {\r\n\t\t\t\tname: '最小缩放因子',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tshadowColor: {\r\n\t\t\t\tname: '阴影颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tshadowOffset: {\r\n\t\t\t\tname: '阴影偏移',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tx: {\r\n\t\t\t\t\t\tname: 'x',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ty: {\r\n\t\t\t\t\t\tname: 'y',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tshadowRadius: {\r\n\t\t\t\tname: '阴影弧度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\ttextColor: {\r\n\t\t\t\tname: '文本颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\ttextOpacity: {\r\n\t\t\t\tname: '文本透明度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\turl: {\r\n\t\t\t\tname: '跳转链接',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tstyle: {\r\n\t\t\t\tname: '日期样式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t日期: 'date',\r\n\t\t\t\t\t时间: 'time',\r\n\t\t\t\t\t计时器: 'timer',\r\n\t\t\t\t\t相对: 'relative',\r\n\t\t\t\t\t偏移: 'offset',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignText: {\r\n\t\t\t\tname: '文本对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t靠左: 'flex-start',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t\t靠右: 'flex-end',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\timage: {\r\n\t\t\t\tname: '图片',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tborderColor: {\r\n\t\t\t\tname: '边框颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tborderWidth: {\r\n\t\t\t\tname: '边框宽度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tcontainerRelativeShape: {\r\n\t\t\t\tname: '图片拐角是否依赖于容器',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'boolean',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t是: true,\r\n\t\t\t\t\t否: false,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\timageOpacity: {\r\n\t\t\t\tname: '图片透明度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\timageSize: {\r\n\t\t\t\tname: '图片尺寸',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tname: '宽度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tname: '高度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tresizable: {\r\n\t\t\t\tname: '是否可以缩放',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'boolean',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t是: true,\r\n\t\t\t\t\t否: false,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttint: {\r\n\t\t\t\tname: '蒙版',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tcolor: {\r\n\t\t\t\t\t\tname: '颜色',\r\n\t\t\t\t\t\ttype: 'color',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\topacity: {\r\n\t\t\t\t\t\tname: '透明度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcontentMode: {\r\n\t\t\t\tname: '填充模式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t适当: 'fit',\r\n\t\t\t\t\t充满: 'fill',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignImage: {\r\n\t\t\t\tname: '图片对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t靠左: 'flex-start',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t\t靠右: 'flex-end',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\ttext: {\r\n\t\t\t\tname: '文本',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\r\n\t\t\tlength: {\r\n\t\t\t\tname: '空白长度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\tname: '背景颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tbackgroundGradient: {\r\n\t\t\t\tname: '背景渐进色',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tcolors: {\r\n\t\t\t\t\t\tname: '颜色集合',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlocations: {\r\n\t\t\t\t\t\tname: '位置集合',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tangle: {\r\n\t\t\t\t\t\tname: '角度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbackgroundImage: {\r\n\t\t\t\tname: '背景图片',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\trefreshAfterDate: {\r\n\t\t\t\tname: '刷新时间',\r\n\t\t\t\ttype: 'datetime-local',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tspacing: {\r\n\t\t\t\tname: '内部间距',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tpadding: {\r\n\t\t\t\tname: '外部边距',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tname: '上边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tleft: {\r\n\t\t\t\t\t\tname: '左边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbottom: {\r\n\t\t\t\t\t\tname: '下边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tright: {\r\n\t\t\t\t\t\tname: '右边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\tsize: {\r\n\t\t\t\tname: '容器尺寸',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tname: '宽度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tname: '高度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcornerRadius: {\r\n\t\t\t\tname: '拐角弧度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tlayout: {\r\n\t\t\t\tname: '布局方式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t横向布局: Ornt.X,\r\n\t\t\t\t\t纵向布局: Ornt.Y,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignContent: {\r\n\t\t\t\tname: '内容对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t顶部: 'flex-start',\r\n\t\t\t\t\t底部: 'flex-end',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\t\treturn { state, map, genID };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped></style>\r\n","let id = 0;\r\nexport default () => {\r\n\treturn id++;\r\n};\r\n","\r\nimport { defineComponent, inject } from 'vue';\r\nimport { dataKey, Ornt, State } from '../types';\r\nimport genID from '../util/genID';\r\n\r\nexport default defineComponent({\r\n\tsetup() {\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst map = {\r\n\t\t\tdate: {\r\n\t\t\t\tname: '日期',\r\n\t\t\t\ttype: 'datetime-local',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tfont: {\r\n\t\t\t\tname: '字体',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tsize: {\r\n\t\t\t\t\t\tname: '大小',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: {\r\n\t\t\t\t\t\tname: '类型',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlineLimit: {\r\n\t\t\t\tname: '行数限制',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tminimumScaleFactor: {\r\n\t\t\t\tname: '最小缩放因子',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tshadowColor: {\r\n\t\t\t\tname: '阴影颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tshadowOffset: {\r\n\t\t\t\tname: '阴影偏移',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tx: {\r\n\t\t\t\t\t\tname: 'x',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ty: {\r\n\t\t\t\t\t\tname: 'y',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tshadowRadius: {\r\n\t\t\t\tname: '阴影弧度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\ttextColor: {\r\n\t\t\t\tname: '文本颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\ttextOpacity: {\r\n\t\t\t\tname: '文本透明度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\turl: {\r\n\t\t\t\tname: '跳转链接',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tstyle: {\r\n\t\t\t\tname: '日期样式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t日期: 'date',\r\n\t\t\t\t\t时间: 'time',\r\n\t\t\t\t\t计时器: 'timer',\r\n\t\t\t\t\t相对: 'relative',\r\n\t\t\t\t\t偏移: 'offset',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignText: {\r\n\t\t\t\tname: '文本对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t靠左: 'flex-start',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t\t靠右: 'flex-end',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\timage: {\r\n\t\t\t\tname: '图片',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tborderColor: {\r\n\t\t\t\tname: '边框颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tborderWidth: {\r\n\t\t\t\tname: '边框宽度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tcontainerRelativeShape: {\r\n\t\t\t\tname: '图片拐角是否依赖于容器',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'boolean',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t是: true,\r\n\t\t\t\t\t否: false,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\timageOpacity: {\r\n\t\t\t\tname: '图片透明度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\timageSize: {\r\n\t\t\t\tname: '图片尺寸',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tname: '宽度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tname: '高度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tresizable: {\r\n\t\t\t\tname: '是否可以缩放',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'boolean',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t是: true,\r\n\t\t\t\t\t否: false,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttint: {\r\n\t\t\t\tname: '蒙版',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tcolor: {\r\n\t\t\t\t\t\tname: '颜色',\r\n\t\t\t\t\t\ttype: 'color',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\topacity: {\r\n\t\t\t\t\t\tname: '透明度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcontentMode: {\r\n\t\t\t\tname: '填充模式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t适当: 'fit',\r\n\t\t\t\t\t充满: 'fill',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignImage: {\r\n\t\t\t\tname: '图片对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t靠左: 'flex-start',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t\t靠右: 'flex-end',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\ttext: {\r\n\t\t\t\tname: '文本',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\r\n\t\t\tlength: {\r\n\t\t\t\tname: '空白长度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\tname: '背景颜色',\r\n\t\t\t\ttype: 'color',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tbackgroundGradient: {\r\n\t\t\t\tname: '背景渐进色',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\tcolors: {\r\n\t\t\t\t\t\tname: '颜色集合',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlocations: {\r\n\t\t\t\t\t\tname: '位置集合',\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tvalueType: 'string',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tangle: {\r\n\t\t\t\t\t\tname: '角度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbackgroundImage: {\r\n\t\t\t\tname: '背景图片',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\trefreshAfterDate: {\r\n\t\t\t\tname: '刷新时间',\r\n\t\t\t\ttype: 'datetime-local',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t},\r\n\t\t\tspacing: {\r\n\t\t\t\tname: '内部间距',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tpadding: {\r\n\t\t\t\tname: '外部边距',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\tname: '上边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tleft: {\r\n\t\t\t\t\t\tname: '左边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbottom: {\r\n\t\t\t\t\t\tname: '下边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tright: {\r\n\t\t\t\t\t\tname: '右边距',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\tsize: {\r\n\t\t\t\tname: '容器尺寸',\r\n\t\t\t\ttype: 'title',\r\n\t\t\t\tcontent: {\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tname: '宽度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tname: '高度',\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\tvalueType: 'number',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcornerRadius: {\r\n\t\t\t\tname: '拐角弧度',\r\n\t\t\t\ttype: 'number',\r\n\t\t\t\tvalueType: 'number',\r\n\t\t\t},\r\n\t\t\tlayout: {\r\n\t\t\t\tname: '布局方式',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t横向布局: Ornt.X,\r\n\t\t\t\t\t纵向布局: Ornt.Y,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\talignContent: {\r\n\t\t\t\tname: '内容对齐',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\tvalueType: 'string',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t顶部: 'flex-start',\r\n\t\t\t\t\t底部: 'flex-end',\r\n\t\t\t\t\t居中: 'center',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\t\treturn { state, map, genID };\r\n\t},\r\n});\r\n","import { render } from \"./AttrList.vue?vue&type=template&id=8561be34\"\nimport script from \"./AttrList.vue?vue&type=script&lang=ts\"\nexport * from \"./AttrList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { Ornt, widgetType, WidgetDate, WidgetText, WidgetImage, ListWidget, WidgetStack, WidgetSpacer } from '../types';\r\nimport genID from '../util/genID';\r\n\r\ninterface WidgetList {\r\n\t[widgetType.DATE]: WidgetDate;\r\n\t[widgetType.TEXT]: WidgetText;\r\n\t[widgetType.IMAGE]: WidgetImage;\r\n\t[widgetType.SPACER]: WidgetSpacer;\r\n\t[widgetType.STACK]: WidgetStack;\r\n\t[widgetType.LIST]: ListWidget;\r\n}\r\n\r\nexport default (type: widgetType) => {\r\n\t// 在这里设置每个组件创建时的属性默认值\r\n\tconst widgetList: WidgetList = {\r\n\t\t[widgetType.DATE]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.DATE,\r\n\t\t\ttext: '请选择日期',\r\n\t\t\tattrs: {\r\n\t\t\t\tdate: '',\r\n\t\t\t\tfont: {\r\n\t\t\t\t\tsize: 16,\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t},\r\n\t\t\t\tshadowColor: '#000',\r\n\t\t\t\tshadowOffset: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t},\r\n\t\t\t\tshadowRadius: 0,\r\n\t\t\t\ttextColor: '#fff',\r\n\t\t\t\ttextOpacity: 1,\r\n\t\t\t\tlineLimit: 0,\r\n\t\t\t\turl: '',\r\n\t\t\t\tstyle: 'date',\r\n\t\t\t\talignText: 'flex-start',\r\n\t\t\t\tminimumScaleFactor: 1,\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\t[widgetType.IMAGE]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.IMAGE,\r\n\t\t\tattrs: {\r\n\t\t\t\timage: './test1.jpg',\r\n\t\t\t\tborderColor: '#000',\r\n\t\t\t\tborderWidth: 0,\r\n\t\t\t\timageOpacity: 1,\r\n\t\t\t\tcornerRadius: 0,\r\n\t\t\t\timageSize: {\r\n\t\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t\t},\r\n\t\t\t\ttint: {\r\n\t\t\t\t\tcolor: '#000',\r\n\t\t\t\t\topacity: 0,\r\n\t\t\t\t},\r\n\t\t\t\tcontentMode: 'fit',\r\n\t\t\t\talignImage: 'flex-start',\r\n\t\t\t\turl: '',\r\n\t\t\t\tcontainerRelativeShape: false,\r\n\t\t\t\tresizable: true,\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t\trawImageDate: '',\r\n\t\t\trawImageSize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\t[widgetType.TEXT]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.TEXT,\r\n\t\t\tattrs: {\r\n\t\t\t\ttext: '请输入文本',\r\n\t\t\t\tfont: {\r\n\t\t\t\t\tsize: 16,\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t},\r\n\t\t\t\tshadowColor: '#000',\r\n\t\t\t\tshadowOffset: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t},\r\n\t\t\t\tshadowRadius: 0,\r\n\t\t\t\ttextColor: '#fff',\r\n\t\t\t\ttextOpacity: 1,\r\n\t\t\t\tlineLimit: 0,\r\n\t\t\t\turl: '',\r\n\t\t\t\talignText: 'flex-start',\r\n\t\t\t\tminimumScaleFactor: 1,\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\t[widgetType.SPACER]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.SPACER,\r\n\t\t\tattrs: {\r\n\t\t\t\tlength: 0,\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\t[widgetType.LIST]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.LIST,\r\n\t\t\tbgImageDate: '',\r\n\t\t\tattrs: {\r\n\t\t\t\tbackgroundColor: '#000',\r\n\t\t\t\tbackgroundGradient: {\r\n\t\t\t\t\tcolors: '',\r\n\t\t\t\t\tlocations: '',\r\n\t\t\t\t\tangle: 90,\r\n\t\t\t\t},\r\n\t\t\t\tbackgroundImage: '',\r\n\t\t\t\tspacing: 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\ttop: 20,\r\n\t\t\t\t\tleft: 20,\r\n\t\t\t\t\tbottom: 20,\r\n\t\t\t\t\tright: 20,\r\n\t\t\t\t},\r\n\t\t\t\turl: '',\r\n\t\t\t\trefreshAfterDate: '',\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 320,\r\n\t\t\t\t[Ornt.Y]: 149,\r\n\t\t\t},\r\n\t\t\tshowNodes: [],\r\n\t\t\trealNodes: [],\r\n\t\t},\r\n\t\t[widgetType.STACK]: {\r\n\t\t\tid: genID(),\r\n\t\t\ttype: widgetType.STACK,\r\n\t\t\tbgImageDate: '',\r\n\t\t\tattrs: {\r\n\t\t\t\tsize: {\r\n\t\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t\t},\r\n\t\t\t\tbackgroundColor: '',\r\n\t\t\t\tbackgroundGradient: {\r\n\t\t\t\t\tcolors: '',\r\n\t\t\t\t\tlocations: '',\r\n\t\t\t\t\tangle: 90,\r\n\t\t\t\t},\r\n\t\t\t\tbackgroundImage: '',\r\n\t\t\t\tborderColor: '#fff',\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tcornerRadius: 0,\r\n\t\t\t\tspacing: 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\tright: 0,\r\n\t\t\t\t},\r\n\t\t\t\turl: '',\r\n\t\t\t\tlayout: Ornt.X,\r\n\t\t\t\talignContent: 'flex-start',\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t[Ornt.X]: 0,\r\n\t\t\t\t[Ornt.Y]: 0,\r\n\t\t\t},\r\n\t\t\tshowNodes: [],\r\n\t\t\trealNodes: [],\r\n\t\t},\r\n\t};\r\n\treturn widgetList[type];\r\n};\r\n","\nimport { defineComponent, provide, reactive } from 'vue';\nimport Editor from './components/Editor.vue';\nimport WidgetList from './components/WidgetList.vue';\nimport AttrList from './components/AttrList.vue';\nimport { Widget, widgetType, dataKey, State } from './types';\nimport createWidget from './widget/createWidget';\n\nexport default defineComponent({\n\tcomponents: { Editor, WidgetList, AttrList },\n\tsetup() {\n\t\tconst rootWidget: Widget = createWidget(widgetType.LIST);\n\t\tconst curWidget = reactive<Widget>(rootWidget);\n\t\t// 共享数据\n\t\tconst state = reactive<State>({\n\t\t\trootWidget,\n\t\t\tcurWidget,\n\t\t});\n\n\t\tprovide(dataKey.STATE, state);\n\t\treturn { state, widgetType };\n\t},\n});\n","import { render } from \"./App.vue?vue&type=template&id=b0d75fce&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=b0d75fce&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-b0d75fce\"\n\nexport default script","<template>\r\n\t<div\r\n\t\tclass=\"listWidget\"\r\n\t\tref=\"myDOM\"\r\n\t\t@dragover=\"handleDragOver\"\r\n\t\t@drop=\"handleDrop\"\r\n\t\t@dragleave=\"handleDragLeave\"\r\n\t\t@click=\"selectCurWidget\"\r\n\t>\r\n\t\t<component v-for=\"node in me.showNodes\" :key=\"node.id\" :is=\"node.type\" :me=\"node\" :parentType=\"me.type\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, widgetType, State, WidgetSpacer } from '../types';\r\nimport createWidget from './createWidget';\r\nimport apportion from '../util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<ListWidget>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\t// 处理组件属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tlet childrenCount = me.realNodes.length;\r\n\t\t\tlet lastTotalPadding =\r\n\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\tlet spacing = me.attrs.spacing;\r\n\t\t\twatch(\r\n\t\t\t\t[me.realNodes, me.attrs, me.size],\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// spacing、nodes\r\n\t\t\t\t\tif (me.realNodes.length !== childrenCount || spacing !== me.attrs.spacing) {\r\n\t\t\t\t\t\tchildrenCount = me.realNodes.length;\r\n\t\t\t\t\t\tspacing = me.attrs.spacing;\r\n\r\n\t\t\t\t\t\tme.showNodes = me.realNodes.map(v => v);\r\n\t\t\t\t\t\tif (spacing > 0) {\r\n\t\t\t\t\t\t\tme.showNodes.forEach((node, index, array) => {\r\n\t\t\t\t\t\t\t\tif (index != childrenCount - 1) {\r\n\t\t\t\t\t\t\t\t\tconst widgetSpacer = createWidget(widgetType.SPACER) as WidgetSpacer;\r\n\t\t\t\t\t\t\t\t\twidgetSpacer.attrs.length = spacing;\r\n\t\t\t\t\t\t\t\t\tarray.splice(index * 2 - 1, 0, widgetSpacer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapportion(me);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\ttarget.style.width = me.size.width + 'px';\r\n\t\t\t\t\ttarget.style.height = me.size.height + 'px';\r\n\r\n\t\t\t\t\t// backgroundColor\r\n\t\t\t\t\ttarget.style.backgroundColor = me.attrs.backgroundColor;\r\n\r\n\t\t\t\t\t// backgroundGradient\r\n\t\t\t\t\ttarget.style.backgroundImage = '';\r\n\t\t\t\t\tconst angle = me.attrs.backgroundGradient.angle + 'deg';\r\n\t\t\t\t\tconst colors = me.attrs.backgroundGradient.colors.split(',');\r\n\t\t\t\t\tconst locations = me.attrs.backgroundGradient.locations.split(',');\r\n\t\t\t\t\tconst colorAndLocation = colors\r\n\t\t\t\t\t\t.reduce((preValue, curValue, index) => {\r\n\t\t\t\t\t\t\tconst location = Number(locations[index]) * 100 + '%';\r\n\t\t\t\t\t\t\treturn preValue + curValue + ' ' + location + ',';\r\n\t\t\t\t\t\t}, '')\r\n\t\t\t\t\t\t.slice(0, -1);\r\n\t\t\t\t\ttarget.style.backgroundImage = 'linear-gradient(' + angle + ', ' + colorAndLocation + ' )';\r\n\r\n\t\t\t\t\t// backgroundImage\r\n\t\t\t\t\tconst imageURL = me.attrs.backgroundImage;\r\n\t\t\t\t\tif (imageURL) {\r\n\t\t\t\t\t\tconst bgImage = new Image();\r\n\t\t\t\t\t\tbgImage.onload = () => {\r\n\t\t\t\t\t\t\tconst imageDate = getBase64Image(bgImage);\r\n\t\t\t\t\t\t\ttarget.style.backgroundImage = 'url(' + imageDate + ')';\r\n\t\t\t\t\t\t\tme.bgImageDate = imageDate.slice(22);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbgImage.src = imageURL;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// padding\r\n\t\t\t\t\ttarget.style.paddingTop = me.attrs.padding.top + 'px';\r\n\t\t\t\t\ttarget.style.paddingLeft = me.attrs.padding.left + 'px';\r\n\t\t\t\t\ttarget.style.paddingRight = me.attrs.padding.right + 'px';\r\n\t\t\t\t\ttarget.style.paddingBottom = me.attrs.padding.bottom + 'px';\r\n\t\t\t\t\tconst totalPadding =\r\n\t\t\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\t\t\tif (lastTotalPadding !== totalPadding) {\r\n\t\t\t\t\t\tlastTotalPadding = totalPadding;\r\n\t\t\t\t\t\tapportion(me);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 若仅包含stack和spacer，则垂直和水平居中对齐（默认）\r\n\t\t\t\t\t// 若存在image、text或date，则靠左垂直居中对齐\r\n\t\t\t\t\tconst types: any = {\r\n\t\t\t\t\t\t[widgetType.IMAGE]: true,\r\n\t\t\t\t\t\t[widgetType.TEXT]: true,\r\n\t\t\t\t\t\t[widgetType.DATE]: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (me.realNodes.find(node => types[node.type])) {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'flex-start';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'center';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// 处理新增组件\r\n\t\tconst handleDragOver = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 选中高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '0.5';\r\n\r\n\t\t\t(e.dataTransfer as DataTransfer).dropEffect = 'copy';\r\n\t\t};\r\n\t\tconst handleDrop = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\r\n\t\t\t// 将新增组件插入到容器中\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tconst type = dataTransfer.getData(dataKey.TYPEOFADDEDWIDGET) as widgetType;\r\n\t\t\tconst newWidget = createWidget(type);\r\n\t\t\tif (newWidget) me.realNodes.push(newWidget);\r\n\t\t};\r\n\t\tconst handleDragLeave = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tmyDOM,\r\n\t\t\thandleDragOver,\r\n\t\t\thandleDrop,\r\n\t\t\thandleDragLeave,\r\n\t\t\tselectCurWidget,\r\n\t\t};\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.listWidget {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\toverflow: hidden;\r\n\tflex-wrap: nowrap;\r\n\tborder-radius: 20px;\r\n\tbox-sizing: border-box;\r\n\tbackground-size: cover;\r\n}\r\n.listWidget > * {\r\n\tflex-grow: 0;\r\n\tflex-shrink: 0;\r\n}\r\n</style>\r\n","export default (img: HTMLImageElement) => {\r\n\tconst canvas = document.createElement('canvas');\r\n\tconst ctx = canvas.getContext('2d');\r\n\tcanvas.width = img.width;\r\n\tcanvas.height = img.height;\r\n\t(ctx as CanvasRenderingContext2D).drawImage(img, 0, 0, img.width, img.height);\r\n\treturn canvas.toDataURL('image/png');\r\n};\r\n","\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, widgetType, State, WidgetSpacer } from '../types';\r\nimport createWidget from './createWidget';\r\nimport apportion from '../util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<ListWidget>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\t// 处理组件属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tlet childrenCount = me.realNodes.length;\r\n\t\t\tlet lastTotalPadding =\r\n\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\tlet spacing = me.attrs.spacing;\r\n\t\t\twatch(\r\n\t\t\t\t[me.realNodes, me.attrs, me.size],\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// spacing、nodes\r\n\t\t\t\t\tif (me.realNodes.length !== childrenCount || spacing !== me.attrs.spacing) {\r\n\t\t\t\t\t\tchildrenCount = me.realNodes.length;\r\n\t\t\t\t\t\tspacing = me.attrs.spacing;\r\n\r\n\t\t\t\t\t\tme.showNodes = me.realNodes.map(v => v);\r\n\t\t\t\t\t\tif (spacing > 0) {\r\n\t\t\t\t\t\t\tme.showNodes.forEach((node, index, array) => {\r\n\t\t\t\t\t\t\t\tif (index != childrenCount - 1) {\r\n\t\t\t\t\t\t\t\t\tconst widgetSpacer = createWidget(widgetType.SPACER) as WidgetSpacer;\r\n\t\t\t\t\t\t\t\t\twidgetSpacer.attrs.length = spacing;\r\n\t\t\t\t\t\t\t\t\tarray.splice(index * 2 - 1, 0, widgetSpacer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapportion(me);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\ttarget.style.width = me.size.width + 'px';\r\n\t\t\t\t\ttarget.style.height = me.size.height + 'px';\r\n\r\n\t\t\t\t\t// backgroundColor\r\n\t\t\t\t\ttarget.style.backgroundColor = me.attrs.backgroundColor;\r\n\r\n\t\t\t\t\t// backgroundGradient\r\n\t\t\t\t\ttarget.style.backgroundImage = '';\r\n\t\t\t\t\tconst angle = me.attrs.backgroundGradient.angle + 'deg';\r\n\t\t\t\t\tconst colors = me.attrs.backgroundGradient.colors.split(',');\r\n\t\t\t\t\tconst locations = me.attrs.backgroundGradient.locations.split(',');\r\n\t\t\t\t\tconst colorAndLocation = colors\r\n\t\t\t\t\t\t.reduce((preValue, curValue, index) => {\r\n\t\t\t\t\t\t\tconst location = Number(locations[index]) * 100 + '%';\r\n\t\t\t\t\t\t\treturn preValue + curValue + ' ' + location + ',';\r\n\t\t\t\t\t\t}, '')\r\n\t\t\t\t\t\t.slice(0, -1);\r\n\t\t\t\t\ttarget.style.backgroundImage = 'linear-gradient(' + angle + ', ' + colorAndLocation + ' )';\r\n\r\n\t\t\t\t\t// backgroundImage\r\n\t\t\t\t\tconst imageURL = me.attrs.backgroundImage;\r\n\t\t\t\t\tif (imageURL) {\r\n\t\t\t\t\t\tconst bgImage = new Image();\r\n\t\t\t\t\t\tbgImage.onload = () => {\r\n\t\t\t\t\t\t\tconst imageDate = getBase64Image(bgImage);\r\n\t\t\t\t\t\t\ttarget.style.backgroundImage = 'url(' + imageDate + ')';\r\n\t\t\t\t\t\t\tme.bgImageDate = imageDate.slice(22);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbgImage.src = imageURL;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// padding\r\n\t\t\t\t\ttarget.style.paddingTop = me.attrs.padding.top + 'px';\r\n\t\t\t\t\ttarget.style.paddingLeft = me.attrs.padding.left + 'px';\r\n\t\t\t\t\ttarget.style.paddingRight = me.attrs.padding.right + 'px';\r\n\t\t\t\t\ttarget.style.paddingBottom = me.attrs.padding.bottom + 'px';\r\n\t\t\t\t\tconst totalPadding =\r\n\t\t\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\t\t\tif (lastTotalPadding !== totalPadding) {\r\n\t\t\t\t\t\tlastTotalPadding = totalPadding;\r\n\t\t\t\t\t\tapportion(me);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 若仅包含stack和spacer，则垂直和水平居中对齐（默认）\r\n\t\t\t\t\t// 若存在image、text或date，则靠左垂直居中对齐\r\n\t\t\t\t\tconst types: any = {\r\n\t\t\t\t\t\t[widgetType.IMAGE]: true,\r\n\t\t\t\t\t\t[widgetType.TEXT]: true,\r\n\t\t\t\t\t\t[widgetType.DATE]: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (me.realNodes.find(node => types[node.type])) {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'flex-start';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'center';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// 处理新增组件\r\n\t\tconst handleDragOver = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 选中高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '0.5';\r\n\r\n\t\t\t(e.dataTransfer as DataTransfer).dropEffect = 'copy';\r\n\t\t};\r\n\t\tconst handleDrop = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\r\n\t\t\t// 将新增组件插入到容器中\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tconst type = dataTransfer.getData(dataKey.TYPEOFADDEDWIDGET) as widgetType;\r\n\t\t\tconst newWidget = createWidget(type);\r\n\t\t\tif (newWidget) me.realNodes.push(newWidget);\r\n\t\t};\r\n\t\tconst handleDragLeave = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tmyDOM,\r\n\t\t\thandleDragOver,\r\n\t\t\thandleDrop,\r\n\t\t\thandleDragLeave,\r\n\t\t\tselectCurWidget,\r\n\t\t};\r\n\t},\r\n});\r\n","import { render } from \"./ListWidget.vue?vue&type=template&id=22877752&scoped=true\"\nimport script from \"./ListWidget.vue?vue&type=script&lang=ts\"\nexport * from \"./ListWidget.vue?vue&type=script&lang=ts\"\n\nimport \"./ListWidget.vue?vue&type=style&index=0&id=22877752&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-22877752\"\n\nexport default script","<template>\r\n\t<div class=\"widgetDate\" ref=\"myDOM\" @click=\"selectCurWidget\"></div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport apportion from '@/util/apportion';\r\nimport getTextSize from '@/util/getTextSize';\r\nimport { defineComponent, inject, onMounted, PropType, reactive, watch, ref } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetDate, widgetType } from '../types';\r\nimport moment from 'moment';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetDate>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst parentType = ref(props.parentType);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet lastFontSize = me.attrs.font.size;\r\n\t\t\tlet lastLineLimit = me.attrs.lineLimit;\r\n\t\t\tlet lastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\tconst realHeight = me.size.height;\r\n\t\t\t\t\tconst realWidth = me.size.width;\r\n\t\t\t\t\ttarget.style.width = realWidth + 'px';\r\n\t\t\t\t\ttarget.style.height = realHeight + 'px';\r\n\r\n\t\t\t\t\t// date、style\r\n\t\t\t\t\tconst date = me.attrs.date;\r\n\t\t\t\t\tconst style = me.attrs.style;\r\n\t\t\t\t\tif (date) {\r\n\t\t\t\t\t\tif (style === 'date') me.text = moment(date).format('LL');\r\n\t\t\t\t\t\tif (style === 'time') me.text = moment(date).format('LT');\r\n\t\t\t\t\t\tif (style === 'timer') {\r\n\t\t\t\t\t\t\t// const nowTime = new Date();\r\n\t\t\t\t\t\t\t// let diff = moment(date).diff(nowTime, 'seconds');\r\n\t\t\t\t\t\t\t// const second = diff % 60;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 60 + '');\r\n\t\t\t\t\t\t\t// const minute = diff % 60;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 60 + '');\r\n\t\t\t\t\t\t\t// const hour = diff % 24;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 24 + '');\r\n\t\t\t\t\t\t\t// const day = diff;\r\n\t\t\t\t\t\t\t// const month = moment(date).diff(nowTime, 'months');\r\n\t\t\t\t\t\t\t// const year = moment(date).diff(nowTime, 'years');\r\n\t\t\t\t\t\t\t// console.log(second, minute, hour, day, month, year);\r\n\t\t\t\t\t\t\tme.text = moment(date).format('LT');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (style === 'offset') me.text = moment(date).format('LT');\r\n\t\t\t\t\t\tif (style === 'relative') me.text = moment(date).format('LT');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target.innerText !== me.text) {\r\n\t\t\t\t\t\ttarget.innerText = me.text;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// minimumScaleFactor\r\n\t\t\t\t\tif (lastMinScaleFactor != me.attrs.minimumScaleFactor) {\r\n\t\t\t\t\t\tlastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet realFontSize = me.attrs.font.size;\r\n\t\t\t\t\tconst minFontSize = lastMinScaleFactor * realFontSize;\r\n\t\t\t\t\tlet computedHeight = getTextSize(me.attrs.date, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\twhile (computedHeight > realHeight && realFontSize > minFontSize) {\r\n\t\t\t\t\t\trealFontSize--;\r\n\t\t\t\t\t\tcomputedHeight = getTextSize(me.attrs.date, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// font：size、type\r\n\t\t\t\t\ttarget.style.fontSize = realFontSize + 'px';\r\n\t\t\t\t\ttarget.style.lineHeight = realFontSize + 'px';\r\n\t\t\t\t\tif (lastFontSize != me.attrs.font.size) {\r\n\t\t\t\t\t\tlastFontSize = me.attrs.font.size;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// lineLimit\r\n\t\t\t\t\tif (lastLineLimit != me.attrs.lineLimit) {\r\n\t\t\t\t\t\tlastLineLimit = me.attrs.lineLimit;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// textColor、textOpacity\r\n\t\t\t\t\ttarget.style.color = me.attrs.textColor;\r\n\t\t\t\t\ttarget.style.opacity = me.attrs.textOpacity + '';\r\n\r\n\t\t\t\t\t// shadowColor、shadowOffset、shadowRadius\r\n\t\t\t\t\tconst x = me.attrs.shadowOffset.x;\r\n\t\t\t\t\tconst y = me.attrs.shadowOffset.y;\r\n\t\t\t\t\tconst r = me.attrs.shadowRadius;\r\n\t\t\t\t\tconst c = me.attrs.shadowColor;\r\n\t\t\t\t\tconst shadowValue = `${x}px ${y}px ${r}px ${c}`;\r\n\t\t\t\t\ttarget.style.textShadow = shadowValue;\r\n\r\n\t\t\t\t\t// alignText\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\ttarget.style.alignSelf = me.attrs.alignText;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 文本溢出处理\r\n\t\t\t\t\tconst lineCount = Math.ceil(realHeight / realFontSize);\r\n\t\t\t\t\ttarget.style.webkitLineClamp = lineCount + '';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.widgetDate {\r\n\tword-wrap: break-word;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n</style>\r\n","\r\nimport apportion from '@/util/apportion';\r\nimport getTextSize from '@/util/getTextSize';\r\nimport { defineComponent, inject, onMounted, PropType, reactive, watch, ref } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetDate, widgetType } from '../types';\r\nimport moment from 'moment';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetDate>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst parentType = ref(props.parentType);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet lastFontSize = me.attrs.font.size;\r\n\t\t\tlet lastLineLimit = me.attrs.lineLimit;\r\n\t\t\tlet lastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\tconst realHeight = me.size.height;\r\n\t\t\t\t\tconst realWidth = me.size.width;\r\n\t\t\t\t\ttarget.style.width = realWidth + 'px';\r\n\t\t\t\t\ttarget.style.height = realHeight + 'px';\r\n\r\n\t\t\t\t\t// date、style\r\n\t\t\t\t\tconst date = me.attrs.date;\r\n\t\t\t\t\tconst style = me.attrs.style;\r\n\t\t\t\t\tif (date) {\r\n\t\t\t\t\t\tif (style === 'date') me.text = moment(date).format('LL');\r\n\t\t\t\t\t\tif (style === 'time') me.text = moment(date).format('LT');\r\n\t\t\t\t\t\tif (style === 'timer') {\r\n\t\t\t\t\t\t\t// const nowTime = new Date();\r\n\t\t\t\t\t\t\t// let diff = moment(date).diff(nowTime, 'seconds');\r\n\t\t\t\t\t\t\t// const second = diff % 60;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 60 + '');\r\n\t\t\t\t\t\t\t// const minute = diff % 60;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 60 + '');\r\n\t\t\t\t\t\t\t// const hour = diff % 24;\r\n\t\t\t\t\t\t\t// diff = parseInt(diff / 24 + '');\r\n\t\t\t\t\t\t\t// const day = diff;\r\n\t\t\t\t\t\t\t// const month = moment(date).diff(nowTime, 'months');\r\n\t\t\t\t\t\t\t// const year = moment(date).diff(nowTime, 'years');\r\n\t\t\t\t\t\t\t// console.log(second, minute, hour, day, month, year);\r\n\t\t\t\t\t\t\tme.text = moment(date).format('LT');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (style === 'offset') me.text = moment(date).format('LT');\r\n\t\t\t\t\t\tif (style === 'relative') me.text = moment(date).format('LT');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target.innerText !== me.text) {\r\n\t\t\t\t\t\ttarget.innerText = me.text;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// minimumScaleFactor\r\n\t\t\t\t\tif (lastMinScaleFactor != me.attrs.minimumScaleFactor) {\r\n\t\t\t\t\t\tlastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet realFontSize = me.attrs.font.size;\r\n\t\t\t\t\tconst minFontSize = lastMinScaleFactor * realFontSize;\r\n\t\t\t\t\tlet computedHeight = getTextSize(me.attrs.date, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\twhile (computedHeight > realHeight && realFontSize > minFontSize) {\r\n\t\t\t\t\t\trealFontSize--;\r\n\t\t\t\t\t\tcomputedHeight = getTextSize(me.attrs.date, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// font：size、type\r\n\t\t\t\t\ttarget.style.fontSize = realFontSize + 'px';\r\n\t\t\t\t\ttarget.style.lineHeight = realFontSize + 'px';\r\n\t\t\t\t\tif (lastFontSize != me.attrs.font.size) {\r\n\t\t\t\t\t\tlastFontSize = me.attrs.font.size;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// lineLimit\r\n\t\t\t\t\tif (lastLineLimit != me.attrs.lineLimit) {\r\n\t\t\t\t\t\tlastLineLimit = me.attrs.lineLimit;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// textColor、textOpacity\r\n\t\t\t\t\ttarget.style.color = me.attrs.textColor;\r\n\t\t\t\t\ttarget.style.opacity = me.attrs.textOpacity + '';\r\n\r\n\t\t\t\t\t// shadowColor、shadowOffset、shadowRadius\r\n\t\t\t\t\tconst x = me.attrs.shadowOffset.x;\r\n\t\t\t\t\tconst y = me.attrs.shadowOffset.y;\r\n\t\t\t\t\tconst r = me.attrs.shadowRadius;\r\n\t\t\t\t\tconst c = me.attrs.shadowColor;\r\n\t\t\t\t\tconst shadowValue = `${x}px ${y}px ${r}px ${c}`;\r\n\t\t\t\t\ttarget.style.textShadow = shadowValue;\r\n\r\n\t\t\t\t\t// alignText\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\ttarget.style.alignSelf = me.attrs.alignText;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 文本溢出处理\r\n\t\t\t\t\tconst lineCount = Math.ceil(realHeight / realFontSize);\r\n\t\t\t\t\ttarget.style.webkitLineClamp = lineCount + '';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetDate.vue?vue&type=template&id=5ad30389&scoped=true\"\nimport script from \"./WidgetDate.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetDate.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetDate.vue?vue&type=style&index=0&id=5ad30389&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5ad30389\"\n\nexport default script","<template>\r\n\t<div class=\"widgetText\" @click=\"selectCurWidget\" ref=\"myDOM\"></div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport getTextSize from '@/util/getTextSize';\r\nimport { defineComponent, inject, PropType, reactive, ref, onMounted, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetText, widgetType } from '../types';\r\nimport apportion from '../util/apportion';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetText>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst parentType = ref(props.parentType);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\t// 处理该组件的属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet lastFontSize = me.attrs.font.size;\r\n\t\t\tlet lastLineLimit = me.attrs.lineLimit;\r\n\t\t\tlet lastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\tconst realHeight = me.size.height;\r\n\t\t\t\t\tconst realWidth = me.size.width;\r\n\t\t\t\t\ttarget.style.width = realWidth + 'px';\r\n\t\t\t\t\ttarget.style.height = realHeight + 'px';\r\n\r\n\t\t\t\t\t// text\r\n\t\t\t\t\tif (target.innerText !== me.attrs.text) {\r\n\t\t\t\t\t\ttarget.innerText = me.attrs.text;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// minimumScaleFactor\r\n\t\t\t\t\tif (lastMinScaleFactor != me.attrs.minimumScaleFactor) {\r\n\t\t\t\t\t\tlastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet realFontSize = me.attrs.font.size;\r\n\t\t\t\t\tconst minFontSize = lastMinScaleFactor * realFontSize;\r\n\t\t\t\t\tlet computedHeight = getTextSize(me.attrs.text, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\twhile (computedHeight > realHeight && realFontSize > minFontSize) {\r\n\t\t\t\t\t\trealFontSize--;\r\n\t\t\t\t\t\tcomputedHeight = getTextSize(me.attrs.text, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// font：size、type\r\n\t\t\t\t\ttarget.style.fontSize = realFontSize + 'px';\r\n\t\t\t\t\ttarget.style.lineHeight = realFontSize + 'px';\r\n\t\t\t\t\tif (lastFontSize != me.attrs.font.size) {\r\n\t\t\t\t\t\tlastFontSize = me.attrs.font.size;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// lineLimit\r\n\t\t\t\t\tif (lastLineLimit != me.attrs.lineLimit) {\r\n\t\t\t\t\t\tlastLineLimit = me.attrs.lineLimit;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// textColor、textOpacity\r\n\t\t\t\t\ttarget.style.color = me.attrs.textColor;\r\n\t\t\t\t\ttarget.style.opacity = me.attrs.textOpacity + '';\r\n\r\n\t\t\t\t\t// shadowColor、shadowOffset、shadowRadius\r\n\t\t\t\t\tconst x = me.attrs.shadowOffset.x;\r\n\t\t\t\t\tconst y = me.attrs.shadowOffset.y;\r\n\t\t\t\t\tconst r = me.attrs.shadowRadius;\r\n\t\t\t\t\tconst c = me.attrs.shadowColor;\r\n\t\t\t\t\tconst shadowValue = `${x}px ${y}px ${r}px ${c}`;\r\n\t\t\t\t\ttarget.style.textShadow = shadowValue;\r\n\r\n\t\t\t\t\t// alignText\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\ttarget.style.alignSelf = me.attrs.alignText;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 文本溢出处理\r\n\t\t\t\t\tconst lineCount = Math.ceil(realHeight / realFontSize);\r\n\t\t\t\t\ttarget.style.webkitLineClamp = lineCount + '';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.widgetText {\r\n\tword-wrap: break-word;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n</style>\r\n","\r\nimport getTextSize from '@/util/getTextSize';\r\nimport { defineComponent, inject, PropType, reactive, ref, onMounted, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetText, widgetType } from '../types';\r\nimport apportion from '../util/apportion';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetText>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst parentType = ref(props.parentType);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\t// 处理该组件的属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet lastFontSize = me.attrs.font.size;\r\n\t\t\tlet lastLineLimit = me.attrs.lineLimit;\r\n\t\t\tlet lastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\tconst realHeight = me.size.height;\r\n\t\t\t\t\tconst realWidth = me.size.width;\r\n\t\t\t\t\ttarget.style.width = realWidth + 'px';\r\n\t\t\t\t\ttarget.style.height = realHeight + 'px';\r\n\r\n\t\t\t\t\t// text\r\n\t\t\t\t\tif (target.innerText !== me.attrs.text) {\r\n\t\t\t\t\t\ttarget.innerText = me.attrs.text;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// minimumScaleFactor\r\n\t\t\t\t\tif (lastMinScaleFactor != me.attrs.minimumScaleFactor) {\r\n\t\t\t\t\t\tlastMinScaleFactor = me.attrs.minimumScaleFactor;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet realFontSize = me.attrs.font.size;\r\n\t\t\t\t\tconst minFontSize = lastMinScaleFactor * realFontSize;\r\n\t\t\t\t\tlet computedHeight = getTextSize(me.attrs.text, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\twhile (computedHeight > realHeight && realFontSize > minFontSize) {\r\n\t\t\t\t\t\trealFontSize--;\r\n\t\t\t\t\t\tcomputedHeight = getTextSize(me.attrs.text, Ornt.Y, { width: realWidth }, realFontSize);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// font：size、type\r\n\t\t\t\t\ttarget.style.fontSize = realFontSize + 'px';\r\n\t\t\t\t\ttarget.style.lineHeight = realFontSize + 'px';\r\n\t\t\t\t\tif (lastFontSize != me.attrs.font.size) {\r\n\t\t\t\t\t\tlastFontSize = me.attrs.font.size;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// lineLimit\r\n\t\t\t\t\tif (lastLineLimit != me.attrs.lineLimit) {\r\n\t\t\t\t\t\tlastLineLimit = me.attrs.lineLimit;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// textColor、textOpacity\r\n\t\t\t\t\ttarget.style.color = me.attrs.textColor;\r\n\t\t\t\t\ttarget.style.opacity = me.attrs.textOpacity + '';\r\n\r\n\t\t\t\t\t// shadowColor、shadowOffset、shadowRadius\r\n\t\t\t\t\tconst x = me.attrs.shadowOffset.x;\r\n\t\t\t\t\tconst y = me.attrs.shadowOffset.y;\r\n\t\t\t\t\tconst r = me.attrs.shadowRadius;\r\n\t\t\t\t\tconst c = me.attrs.shadowColor;\r\n\t\t\t\t\tconst shadowValue = `${x}px ${y}px ${r}px ${c}`;\r\n\t\t\t\t\ttarget.style.textShadow = shadowValue;\r\n\r\n\t\t\t\t\t// alignText\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\ttarget.style.alignSelf = me.attrs.alignText;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 文本溢出处理\r\n\t\t\t\t\tconst lineCount = Math.ceil(realHeight / realFontSize);\r\n\t\t\t\t\ttarget.style.webkitLineClamp = lineCount + '';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetText.vue?vue&type=template&id=203f00cb&scoped=true\"\nimport script from \"./WidgetText.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetText.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetText.vue?vue&type=style&index=0&id=203f00cb&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-203f00cb\"\n\nexport default script","<template>\r\n\t<div class=\"widgetImage\" ref=\"widgetRef\" @click=\"selectCurWidget\">\r\n\t\t<img class=\"image\" ref=\"imageRef\" @load=\"handleLoad\" />\r\n\t\t<div class=\"mask\" ref=\"maskRef\" />\r\n\t\t<div class=\"border\" ref=\"borderRef\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetImage, widgetType } from '../types';\r\nimport apportion from '../util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetImage>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst widgetRef = ref<HTMLElement>();\r\n\t\tconst imageRef = ref<HTMLImageElement>();\r\n\t\tconst maskRef = ref<HTMLElement>();\r\n\t\tconst borderRef = ref<HTMLElement>();\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst parentType = ref(props.parentType);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tlet one = true;\r\n\t\tlet imgSrc = me.attrs.image;\r\n\t\tconst handleLoad = (e: Event) => {\r\n\t\t\tconst target = e.target as HTMLImageElement;\r\n\t\t\tme.rawImageSize[Ornt.Y] = target.naturalHeight;\r\n\t\t\tme.rawImageSize[Ornt.X] = target.naturalWidth;\r\n\t\t\tme.rawImageDate = getBase64Image(imageRef.value as HTMLImageElement);\r\n\t\t\tif (one || imgSrc !== me.attrs.image) {\r\n\t\t\t\timgSrc = me.attrs.image;\r\n\t\t\t\tapportion(state.rootWidget as ListWidget);\r\n\t\t\t\tone = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tconst widget = widgetRef.value as HTMLElement;\r\n\t\t\tconst img = imageRef.value as HTMLImageElement;\r\n\t\t\tconst mask = maskRef.value as HTMLElement;\r\n\t\t\tconst border = borderRef.value as HTMLElement;\r\n\t\t\tlet lastSize = me.attrs.imageSize.width + me.attrs.imageSize.height;\r\n\t\t\tlet lastResizable = me.attrs.resizable;\r\n\t\t\tlet lastContentMode = me.attrs.contentMode;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\tvalue => {\r\n\t\t\t\t\t// image\r\n\t\t\t\t\timg.src = value.attrs.image;\r\n\r\n\t\t\t\t\t// imageSize\r\n\t\t\t\t\tconst nowSize = me.attrs.imageSize.width + me.attrs.imageSize.height;\r\n\t\t\t\t\tif (lastSize != nowSize) {\r\n\t\t\t\t\t\tlastSize = nowSize;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\twidget.style.width = value.size.width + 'px';\r\n\t\t\t\t\twidget.style.height = value.size.height + 'px';\r\n\r\n\t\t\t\t\t// border\r\n\t\t\t\t\tborder.style.borderColor = me.attrs.borderColor;\r\n\t\t\t\t\tborder.style.borderWidth = me.attrs.borderWidth + 'px';\r\n\r\n\t\t\t\t\t// imageOpacity\r\n\t\t\t\t\twidget.style.opacity = me.attrs.imageOpacity + '';\r\n\r\n\t\t\t\t\t// tintColor\r\n\t\t\t\t\tmask.style.backgroundColor = me.attrs.tint.color;\r\n\t\t\t\t\tmask.style.opacity = me.attrs.tint.opacity + '';\r\n\r\n\t\t\t\t\t// alignImage\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\twidget.style.alignSelf = me.attrs.alignImage;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// contentMode;\r\n\t\t\t\t\tif (lastContentMode !== me.attrs.contentMode) {\r\n\t\t\t\t\t\tlastContentMode = me.attrs.contentMode;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst rate = me.rawImageSize[Ornt.X] / me.rawImageSize[Ornt.Y];\r\n\t\t\t\t\tconst realWidgetWidth = +getComputedStyle(widget).width.slice(0, -2);\r\n\t\t\t\t\tconst realWidgetHeight = +getComputedStyle(widget).height.slice(0, -2);\r\n\t\t\t\t\tif (me.attrs.contentMode === 'fill' && me.attrs.imageSize.width + me.attrs.imageSize.height > 0) {\r\n\t\t\t\t\t\tlet maxLen = rate * realWidgetHeight;\r\n\t\t\t\t\t\tif (maxLen > realWidgetWidth) {\r\n\t\t\t\t\t\t\timg.style.width = maxLen + 'px';\r\n\t\t\t\t\t\t\timg.style.height = realWidgetHeight + 'px';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmaxLen = (1 / rate) * realWidgetWidth;\r\n\t\t\t\t\t\t\timg.style.width = realWidgetWidth + 'px';\r\n\t\t\t\t\t\t\timg.style.height = maxLen + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timg.style.width = '100%';\r\n\t\t\t\t\t\timg.style.height = '100%';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// resizable\r\n\t\t\t\t\tif (lastResizable !== me.attrs.resizable) {\r\n\t\t\t\t\t\tlastResizable = me.attrs.resizable;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!lastResizable) {\r\n\t\t\t\t\t\timg.style.width = me.rawImageSize.width + 'px';\r\n\t\t\t\t\t\timg.style.height = me.rawImageSize.height + 'px';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timg.style.width = '100%';\r\n\t\t\t\t\t\timg.style.height = '100%';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// cornerRadius\r\n\t\t\t\t\tif (me.attrs.containerRelativeShape) {\r\n\t\t\t\t\t\tborder.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t\timg.style.borderRadius = '0px';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tborder.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t\timg.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 图片溢出自身容器的处理\r\n\t\t\t\t\tconst overflowWidth =\r\n\t\t\t\t\t\t+getComputedStyle(img).width.slice(0, -2) - +getComputedStyle(widget).width.slice(0, -2);\r\n\t\t\t\t\tconst overflowHeight =\r\n\t\t\t\t\t\t+getComputedStyle(img).height.slice(0, -2) - +getComputedStyle(widget).height.slice(0, -2);\r\n\t\t\t\t\timg.style.left = -(overflowWidth / 2) + 'px';\r\n\t\t\t\t\timg.style.top = -(overflowHeight / 2) + 'px';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { widgetRef, imageRef, maskRef, borderRef, selectCurWidget, handleLoad };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.widgetImage {\r\n\tposition: relative;\r\n}\r\n.image {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tobject-fit: contain;\r\n}\r\n.mask {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n.border {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbox-sizing: border-box;\r\n\tborder-style: solid;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetImage, widgetType } from '../types';\r\nimport apportion from '../util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetImage>, required: true },\r\n\t\tparentType: { type: String, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst widgetRef = ref<HTMLElement>();\r\n\t\tconst imageRef = ref<HTMLImageElement>();\r\n\t\tconst maskRef = ref<HTMLElement>();\r\n\t\tconst borderRef = ref<HTMLElement>();\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst parentType = ref(props.parentType);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tlet one = true;\r\n\t\tlet imgSrc = me.attrs.image;\r\n\t\tconst handleLoad = (e: Event) => {\r\n\t\t\tconst target = e.target as HTMLImageElement;\r\n\t\t\tme.rawImageSize[Ornt.Y] = target.naturalHeight;\r\n\t\t\tme.rawImageSize[Ornt.X] = target.naturalWidth;\r\n\t\t\tme.rawImageDate = getBase64Image(imageRef.value as HTMLImageElement);\r\n\t\t\tif (one || imgSrc !== me.attrs.image) {\r\n\t\t\t\timgSrc = me.attrs.image;\r\n\t\t\t\tapportion(state.rootWidget as ListWidget);\r\n\t\t\t\tone = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tconst widget = widgetRef.value as HTMLElement;\r\n\t\t\tconst img = imageRef.value as HTMLImageElement;\r\n\t\t\tconst mask = maskRef.value as HTMLElement;\r\n\t\t\tconst border = borderRef.value as HTMLElement;\r\n\t\t\tlet lastSize = me.attrs.imageSize.width + me.attrs.imageSize.height;\r\n\t\t\tlet lastResizable = me.attrs.resizable;\r\n\t\t\tlet lastContentMode = me.attrs.contentMode;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\tvalue => {\r\n\t\t\t\t\t// image\r\n\t\t\t\t\timg.src = value.attrs.image;\r\n\r\n\t\t\t\t\t// imageSize\r\n\t\t\t\t\tconst nowSize = me.attrs.imageSize.width + me.attrs.imageSize.height;\r\n\t\t\t\t\tif (lastSize != nowSize) {\r\n\t\t\t\t\t\tlastSize = nowSize;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\twidget.style.width = value.size.width + 'px';\r\n\t\t\t\t\twidget.style.height = value.size.height + 'px';\r\n\r\n\t\t\t\t\t// border\r\n\t\t\t\t\tborder.style.borderColor = me.attrs.borderColor;\r\n\t\t\t\t\tborder.style.borderWidth = me.attrs.borderWidth + 'px';\r\n\r\n\t\t\t\t\t// imageOpacity\r\n\t\t\t\t\twidget.style.opacity = me.attrs.imageOpacity + '';\r\n\r\n\t\t\t\t\t// tintColor\r\n\t\t\t\t\tmask.style.backgroundColor = me.attrs.tint.color;\r\n\t\t\t\t\tmask.style.opacity = me.attrs.tint.opacity + '';\r\n\r\n\t\t\t\t\t// alignImage\r\n\t\t\t\t\tif (parentType.value === widgetType.LIST) {\r\n\t\t\t\t\t\twidget.style.alignSelf = me.attrs.alignImage;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidget.style.alignSelf = 'flex-start';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// contentMode;\r\n\t\t\t\t\tif (lastContentMode !== me.attrs.contentMode) {\r\n\t\t\t\t\t\tlastContentMode = me.attrs.contentMode;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst rate = me.rawImageSize[Ornt.X] / me.rawImageSize[Ornt.Y];\r\n\t\t\t\t\tconst realWidgetWidth = +getComputedStyle(widget).width.slice(0, -2);\r\n\t\t\t\t\tconst realWidgetHeight = +getComputedStyle(widget).height.slice(0, -2);\r\n\t\t\t\t\tif (me.attrs.contentMode === 'fill' && me.attrs.imageSize.width + me.attrs.imageSize.height > 0) {\r\n\t\t\t\t\t\tlet maxLen = rate * realWidgetHeight;\r\n\t\t\t\t\t\tif (maxLen > realWidgetWidth) {\r\n\t\t\t\t\t\t\timg.style.width = maxLen + 'px';\r\n\t\t\t\t\t\t\timg.style.height = realWidgetHeight + 'px';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmaxLen = (1 / rate) * realWidgetWidth;\r\n\t\t\t\t\t\t\timg.style.width = realWidgetWidth + 'px';\r\n\t\t\t\t\t\t\timg.style.height = maxLen + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timg.style.width = '100%';\r\n\t\t\t\t\t\timg.style.height = '100%';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// resizable\r\n\t\t\t\t\tif (lastResizable !== me.attrs.resizable) {\r\n\t\t\t\t\t\tlastResizable = me.attrs.resizable;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!lastResizable) {\r\n\t\t\t\t\t\timg.style.width = me.rawImageSize.width + 'px';\r\n\t\t\t\t\t\timg.style.height = me.rawImageSize.height + 'px';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timg.style.width = '100%';\r\n\t\t\t\t\t\timg.style.height = '100%';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// cornerRadius\r\n\t\t\t\t\tif (me.attrs.containerRelativeShape) {\r\n\t\t\t\t\t\tborder.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t\timg.style.borderRadius = '0px';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tborder.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t\timg.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 图片溢出自身容器的处理\r\n\t\t\t\t\tconst overflowWidth =\r\n\t\t\t\t\t\t+getComputedStyle(img).width.slice(0, -2) - +getComputedStyle(widget).width.slice(0, -2);\r\n\t\t\t\t\tconst overflowHeight =\r\n\t\t\t\t\t\t+getComputedStyle(img).height.slice(0, -2) - +getComputedStyle(widget).height.slice(0, -2);\r\n\t\t\t\t\timg.style.left = -(overflowWidth / 2) + 'px';\r\n\t\t\t\t\timg.style.top = -(overflowHeight / 2) + 'px';\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn { widgetRef, imageRef, maskRef, borderRef, selectCurWidget, handleLoad };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetImage.vue?vue&type=template&id=4d35acd8&scoped=true\"\nimport script from \"./WidgetImage.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetImage.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetImage.vue?vue&type=style&index=0&id=4d35acd8&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-4d35acd8\"\n\nexport default script","<template>\r\n\t<div class=\"widgetSpacer\" @click=\"selectCurWidget\" ref=\"myDOM\"></div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, State, WidgetSpacer, ListWidget } from '../types';\r\nimport apportion from '../util/apportion';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetSpacer>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>();\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tapportion(rootWidget);\r\n\r\n\t\t\tlet lastLen = me.attrs.length;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\tvalue => {\r\n\t\t\t\t\ttarget.style.width = value.size.width ? value.size.width + 'px' : '';\r\n\t\t\t\t\ttarget.style.height = value.size.height ? value.size.height + 'px' : '';\r\n\t\t\t\t\tif (lastLen !== value.attrs.length) {\r\n\t\t\t\t\t\tlastLen = value.attrs.length;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.widgetSpacer {\r\n\tvisibility: hidden;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, State, WidgetSpacer, ListWidget } from '../types';\r\nimport apportion from '../util/apportion';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetSpacer>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>();\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tapportion(rootWidget);\r\n\r\n\t\t\tlet lastLen = me.attrs.length;\r\n\t\t\twatch(\r\n\t\t\t\tme,\r\n\t\t\t\tvalue => {\r\n\t\t\t\t\ttarget.style.width = value.size.width ? value.size.width + 'px' : '';\r\n\t\t\t\t\ttarget.style.height = value.size.height ? value.size.height + 'px' : '';\r\n\t\t\t\t\tif (lastLen !== value.attrs.length) {\r\n\t\t\t\t\t\tlastLen = value.attrs.length;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn { selectCurWidget, myDOM };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetSpacer.vue?vue&type=template&id=7553e4e2&scoped=true\"\nimport script from \"./WidgetSpacer.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetSpacer.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetSpacer.vue?vue&type=style&index=0&id=7553e4e2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-7553e4e2\"\n\nexport default script","<template>\r\n\t<div\r\n\t\tclass=\"widgetStack\"\r\n\t\tref=\"myDOM\"\r\n\t\t@dragover=\"handleDragOver\"\r\n\t\t@drop=\"handleDrop\"\r\n\t\t@dragleave=\"handleDragLeave\"\r\n\t\t@click=\"selectCurWidget\"\r\n\t>\r\n\t\t<component v-for=\"node in me.showNodes\" :key=\"node.id\" :is=\"node.type\" :me=\"node\" :parentType=\"me.type\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetSpacer, WidgetStack, widgetType } from '../types';\r\nimport createWidget from './createWidget';\r\nimport apportion from '@/util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetStack>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理该组件的属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet childrenCount = me.realNodes.length;\r\n\t\t\tlet layout = me.attrs.layout;\r\n\t\t\tlet lastSize = me.attrs.size.width + me.attrs.size.height;\r\n\t\t\tlet lastTotalPadding =\r\n\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\tlet spacing = me.attrs.spacing;\r\n\t\t\twatch(\r\n\t\t\t\t[me.realNodes, me.attrs, me.size],\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// spacing、nodes\r\n\t\t\t\t\tif (me.realNodes.length !== childrenCount || spacing !== me.attrs.spacing) {\r\n\t\t\t\t\t\tchildrenCount = me.realNodes.length;\r\n\t\t\t\t\t\tspacing = me.attrs.spacing;\r\n\r\n\t\t\t\t\t\tme.showNodes = me.realNodes.map(v => v);\r\n\t\t\t\t\t\tif (spacing > 0) {\r\n\t\t\t\t\t\t\tme.showNodes.forEach((node, index, array) => {\r\n\t\t\t\t\t\t\t\tif (index != childrenCount - 1) {\r\n\t\t\t\t\t\t\t\t\tconst widgetSpacer = createWidget(widgetType.SPACER) as WidgetSpacer;\r\n\t\t\t\t\t\t\t\t\twidgetSpacer.attrs.length = spacing;\r\n\t\t\t\t\t\t\t\t\tarray.splice(index * 2 - 1, 0, widgetSpacer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// size\r\n\t\t\t\t\tconst nowSize = me.attrs.size.width + me.attrs.size.height;\r\n\t\t\t\t\tif (lastSize !== nowSize) {\r\n\t\t\t\t\t\tlastSize = nowSize;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\ttarget.style.width = me.size.width + 'px';\r\n\t\t\t\t\ttarget.style.height = me.size.height + 'px';\r\n\r\n\t\t\t\t\t// layout\r\n\t\t\t\t\tif (me.attrs.layout === Ornt.Y) {\r\n\t\t\t\t\t\ttarget.style.flexDirection = 'column';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.flexDirection = 'row';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (layout !== me.attrs.layout) {\r\n\t\t\t\t\t\tlayout = me.attrs.layout;\r\n\t\t\t\t\t\tapportion(state.rootWidget as ListWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// backgroundColor\r\n\t\t\t\t\ttarget.style.backgroundColor = me.attrs.backgroundColor;\r\n\r\n\t\t\t\t\t// backgroundGradient\r\n\t\t\t\t\ttarget.style.backgroundImage = '';\r\n\t\t\t\t\tconst angle = me.attrs.backgroundGradient.angle + 'deg';\r\n\t\t\t\t\tconst colors = me.attrs.backgroundGradient.colors.split(',');\r\n\t\t\t\t\tconst locations = me.attrs.backgroundGradient.locations.split(',');\r\n\t\t\t\t\tconst colorAndLocation = colors\r\n\t\t\t\t\t\t.reduce((preValue, curValue, index) => {\r\n\t\t\t\t\t\t\tconst location = Number(locations[index]) * 100 + '%';\r\n\t\t\t\t\t\t\treturn preValue + curValue + ' ' + location + ',';\r\n\t\t\t\t\t\t}, '')\r\n\t\t\t\t\t\t.slice(0, -1);\r\n\t\t\t\t\ttarget.style.backgroundImage = 'linear-gradient(' + angle + ', ' + colorAndLocation + ' )';\r\n\r\n\t\t\t\t\t// backgroundImage\r\n\t\t\t\t\tconst imageURL = me.attrs.backgroundImage;\r\n\t\t\t\t\tif (imageURL) {\r\n\t\t\t\t\t\tconst bgImage = new Image();\r\n\t\t\t\t\t\tbgImage.onload = () => {\r\n\t\t\t\t\t\t\tconst imageDate = getBase64Image(bgImage);\r\n\t\t\t\t\t\t\ttarget.style.backgroundImage = 'url(' + imageDate + ')';\r\n\t\t\t\t\t\t\tme.bgImageDate = imageDate.slice(22);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbgImage.src = imageURL;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// border\r\n\t\t\t\t\ttarget.style.borderColor = me.attrs.borderColor;\r\n\t\t\t\t\ttarget.style.borderWidth = me.attrs.borderWidth + 'px';\r\n\r\n\t\t\t\t\t// cornerRadius\r\n\t\t\t\t\ttarget.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\r\n\t\t\t\t\t// padding\r\n\t\t\t\t\ttarget.style.paddingTop = me.attrs.padding.top + 'px';\r\n\t\t\t\t\ttarget.style.paddingLeft = me.attrs.padding.left + 'px';\r\n\t\t\t\t\ttarget.style.paddingRight = me.attrs.padding.right + 'px';\r\n\t\t\t\t\ttarget.style.paddingBottom = me.attrs.padding.bottom + 'px';\r\n\t\t\t\t\tconst totalPadding =\r\n\t\t\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\t\t\tif (lastTotalPadding !== totalPadding) {\r\n\t\t\t\t\t\tlastTotalPadding = totalPadding;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// alignContent\r\n\t\t\t\t\tif (target.style.flexDirection === 'row') {\r\n\t\t\t\t\t\ttarget.style.alignItems = me.attrs.alignContent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'flex-start';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// 处理被拖动组件的新增事件\r\n\t\tconst handleDragOver = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 选中高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '0.5';\r\n\r\n\t\t\t(e.dataTransfer as DataTransfer).dropEffect = 'copy';\r\n\t\t};\r\n\t\tconst handleDrop = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\r\n\t\t\t// 将新增组件插入到容器中\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tconst type = dataTransfer.getData(dataKey.TYPEOFADDEDWIDGET) as widgetType;\r\n\t\t\tconst newWidget = createWidget(type);\r\n\t\t\tif (newWidget) me.realNodes.push(newWidget);\r\n\t\t};\r\n\t\tconst handleDragLeave = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\t\t};\r\n\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\t\treturn { myDOM, handleDragOver, handleDrop, handleDragLeave, selectCurWidget };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.widgetStack {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tflex-wrap: nowrap;\r\n\tborder-style: solid;\r\n\tbox-sizing: border-box;\r\n\toverflow: hidden;\r\n\tbackground-size: cover;\r\n}\r\n.widgetStack > * {\r\n\tflex-grow: 0;\r\n\tflex-shrink: 0;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, inject, onMounted, PropType, reactive, ref, watch } from 'vue';\r\nimport { dataKey, ListWidget, Ornt, State, WidgetSpacer, WidgetStack, widgetType } from '../types';\r\nimport createWidget from './createWidget';\r\nimport apportion from '@/util/apportion';\r\nimport getBase64Image from '../util/getBase64Image';\r\n\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: { type: Object as PropType<WidgetStack>, required: true },\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst myDOM = ref<HTMLElement>(); // 指代当前组件所在的节点\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理该组件的属性\r\n\t\tonMounted(() => {\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\tconst rootWidget = state.rootWidget as ListWidget;\r\n\t\t\tlet childrenCount = me.realNodes.length;\r\n\t\t\tlet layout = me.attrs.layout;\r\n\t\t\tlet lastSize = me.attrs.size.width + me.attrs.size.height;\r\n\t\t\tlet lastTotalPadding =\r\n\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\tlet spacing = me.attrs.spacing;\r\n\t\t\twatch(\r\n\t\t\t\t[me.realNodes, me.attrs, me.size],\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// spacing、nodes\r\n\t\t\t\t\tif (me.realNodes.length !== childrenCount || spacing !== me.attrs.spacing) {\r\n\t\t\t\t\t\tchildrenCount = me.realNodes.length;\r\n\t\t\t\t\t\tspacing = me.attrs.spacing;\r\n\r\n\t\t\t\t\t\tme.showNodes = me.realNodes.map(v => v);\r\n\t\t\t\t\t\tif (spacing > 0) {\r\n\t\t\t\t\t\t\tme.showNodes.forEach((node, index, array) => {\r\n\t\t\t\t\t\t\t\tif (index != childrenCount - 1) {\r\n\t\t\t\t\t\t\t\t\tconst widgetSpacer = createWidget(widgetType.SPACER) as WidgetSpacer;\r\n\t\t\t\t\t\t\t\t\twidgetSpacer.attrs.length = spacing;\r\n\t\t\t\t\t\t\t\t\tarray.splice(index * 2 - 1, 0, widgetSpacer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// size\r\n\t\t\t\t\tconst nowSize = me.attrs.size.width + me.attrs.size.height;\r\n\t\t\t\t\tif (lastSize !== nowSize) {\r\n\t\t\t\t\t\tlastSize = nowSize;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// width、height\r\n\t\t\t\t\ttarget.style.width = me.size.width + 'px';\r\n\t\t\t\t\ttarget.style.height = me.size.height + 'px';\r\n\r\n\t\t\t\t\t// layout\r\n\t\t\t\t\tif (me.attrs.layout === Ornt.Y) {\r\n\t\t\t\t\t\ttarget.style.flexDirection = 'column';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.flexDirection = 'row';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (layout !== me.attrs.layout) {\r\n\t\t\t\t\t\tlayout = me.attrs.layout;\r\n\t\t\t\t\t\tapportion(state.rootWidget as ListWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// backgroundColor\r\n\t\t\t\t\ttarget.style.backgroundColor = me.attrs.backgroundColor;\r\n\r\n\t\t\t\t\t// backgroundGradient\r\n\t\t\t\t\ttarget.style.backgroundImage = '';\r\n\t\t\t\t\tconst angle = me.attrs.backgroundGradient.angle + 'deg';\r\n\t\t\t\t\tconst colors = me.attrs.backgroundGradient.colors.split(',');\r\n\t\t\t\t\tconst locations = me.attrs.backgroundGradient.locations.split(',');\r\n\t\t\t\t\tconst colorAndLocation = colors\r\n\t\t\t\t\t\t.reduce((preValue, curValue, index) => {\r\n\t\t\t\t\t\t\tconst location = Number(locations[index]) * 100 + '%';\r\n\t\t\t\t\t\t\treturn preValue + curValue + ' ' + location + ',';\r\n\t\t\t\t\t\t}, '')\r\n\t\t\t\t\t\t.slice(0, -1);\r\n\t\t\t\t\ttarget.style.backgroundImage = 'linear-gradient(' + angle + ', ' + colorAndLocation + ' )';\r\n\r\n\t\t\t\t\t// backgroundImage\r\n\t\t\t\t\tconst imageURL = me.attrs.backgroundImage;\r\n\t\t\t\t\tif (imageURL) {\r\n\t\t\t\t\t\tconst bgImage = new Image();\r\n\t\t\t\t\t\tbgImage.onload = () => {\r\n\t\t\t\t\t\t\tconst imageDate = getBase64Image(bgImage);\r\n\t\t\t\t\t\t\ttarget.style.backgroundImage = 'url(' + imageDate + ')';\r\n\t\t\t\t\t\t\tme.bgImageDate = imageDate.slice(22);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbgImage.src = imageURL;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// border\r\n\t\t\t\t\ttarget.style.borderColor = me.attrs.borderColor;\r\n\t\t\t\t\ttarget.style.borderWidth = me.attrs.borderWidth + 'px';\r\n\r\n\t\t\t\t\t// cornerRadius\r\n\t\t\t\t\ttarget.style.borderRadius = me.attrs.cornerRadius + 'px';\r\n\r\n\t\t\t\t\t// padding\r\n\t\t\t\t\ttarget.style.paddingTop = me.attrs.padding.top + 'px';\r\n\t\t\t\t\ttarget.style.paddingLeft = me.attrs.padding.left + 'px';\r\n\t\t\t\t\ttarget.style.paddingRight = me.attrs.padding.right + 'px';\r\n\t\t\t\t\ttarget.style.paddingBottom = me.attrs.padding.bottom + 'px';\r\n\t\t\t\t\tconst totalPadding =\r\n\t\t\t\t\t\tme.attrs.padding.top + me.attrs.padding.bottom + me.attrs.padding.right + me.attrs.padding.left;\r\n\t\t\t\t\tif (lastTotalPadding !== totalPadding) {\r\n\t\t\t\t\t\tlastTotalPadding = totalPadding;\r\n\t\t\t\t\t\tapportion(rootWidget);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// alignContent\r\n\t\t\t\t\tif (target.style.flexDirection === 'row') {\r\n\t\t\t\t\t\ttarget.style.alignItems = me.attrs.alignContent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget.style.alignItems = 'flex-start';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{ deep: true, immediate: true }\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// 处理被拖动组件的新增事件\r\n\t\tconst handleDragOver = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 选中高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '0.5';\r\n\r\n\t\t\t(e.dataTransfer as DataTransfer).dropEffect = 'copy';\r\n\t\t};\r\n\t\tconst handleDrop = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\r\n\t\t\t// 将新增组件插入到容器中\r\n\t\t\tconst dataTransfer = e.dataTransfer as DataTransfer;\r\n\t\t\tconst type = dataTransfer.getData(dataKey.TYPEOFADDEDWIDGET) as widgetType;\r\n\t\t\tconst newWidget = createWidget(type);\r\n\t\t\tif (newWidget) me.realNodes.push(newWidget);\r\n\t\t};\r\n\t\tconst handleDragLeave = (e: DragEvent) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// 取消高亮\r\n\t\t\tconst target = myDOM.value as HTMLElement;\r\n\t\t\ttarget.style.opacity = '';\r\n\t\t};\r\n\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\t\treturn { myDOM, handleDragOver, handleDrop, handleDragLeave, selectCurWidget };\r\n\t},\r\n});\r\n","import { render } from \"./WidgetStack.vue?vue&type=template&id=6d792e0d&scoped=true\"\nimport script from \"./WidgetStack.vue?vue&type=script&lang=ts\"\nexport * from \"./WidgetStack.vue?vue&type=script&lang=ts\"\n\nimport \"./WidgetStack.vue?vue&type=style&index=0&id=6d792e0d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-6d792e0d\"\n\nexport default script","import ListWidget from './ListWidget.vue';\r\nimport WidgetDate from './WidgetDate.vue';\r\nimport WidgetText from './WidgetText.vue';\r\nimport WidgetImage from './WidgetImage.vue';\r\nimport WidgetSpacer from './WidgetSpacer.vue';\r\nimport WidgetStack from './WidgetStack.vue';\r\n\r\nexport default {\r\n\tListWidget,\r\n\tWidgetDate,\r\n\tWidgetText,\r\n\tWidgetImage,\r\n\tWidgetSpacer,\r\n\tWidgetStack,\r\n};","<template>\r\n\t{{ config.name }}\r\n\t<div v-if=\"config.type == 'title'\">\r\n\t\t<div v-for=\"(config, keyName) in config.content\" :key=\"id + keyName\">\r\n\t\t\t<AttrItem :config=\"config\" :model=\"myModel\" :myKey=\"keyName\" :id=\"id\" />\r\n\t\t</div>\r\n\t</div>\r\n\t<div v-else-if=\"config.type == 'select'\">\r\n\t\t<select v-model=\"myModel\">\r\n\t\t\t<option v-for=\"(option, key, index) in config.options\" :value=\"option\" :key=\"index\">{{ key }}</option>\r\n\t\t</select>\r\n\t</div>\r\n\t<div v-else>\r\n\t\t<input :type=\"config.type\" v-model=\"myModel\" />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, reactive, ref } from 'vue';\r\n\r\nexport default defineComponent({\r\n\tprops: ['config', 'model', 'myKey', 'id'],\r\n\tsetup(props) {\r\n\t\tconst config: any = reactive(props.config);\r\n\t\tconst model: any = reactive(props.model);\r\n\t\tconst myKey: any = ref(props.myKey);\r\n\t\tlet timer: number | undefined = undefined;\r\n\t\tconst type = config.valueType;\r\n\t\tconst myModel: any = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn model[myKey.value];\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\tif (type === 'string') {\r\n\t\t\t\t\t\tmodel[myKey.value] = String(value);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === 'number') {\r\n\t\t\t\t\t\tmodel[myKey.value] = Number(value);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === 'boolean') {\r\n\t\t\t\t\t\tmodel[myKey.value] = Boolean(Number(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn { myModel };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n\tdisplay: inline-block;\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent, reactive, ref } from 'vue';\r\n\r\nexport default defineComponent({\r\n\tprops: ['config', 'model', 'myKey', 'id'],\r\n\tsetup(props) {\r\n\t\tconst config: any = reactive(props.config);\r\n\t\tconst model: any = reactive(props.model);\r\n\t\tconst myKey: any = ref(props.myKey);\r\n\t\tlet timer: number | undefined = undefined;\r\n\t\tconst type = config.valueType;\r\n\t\tconst myModel: any = computed({\r\n\t\t\tget() {\r\n\t\t\t\treturn model[myKey.value];\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\tif (type === 'string') {\r\n\t\t\t\t\t\tmodel[myKey.value] = String(value);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === 'number') {\r\n\t\t\t\t\t\tmodel[myKey.value] = Number(value);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type === 'boolean') {\r\n\t\t\t\t\t\tmodel[myKey.value] = Boolean(Number(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\treturn { myModel };\r\n\t},\r\n});\r\n","import { render } from \"./AttrItem.vue?vue&type=template&id=33d457f0&scoped=true\"\nimport script from \"./AttrItem.vue?vue&type=script&lang=ts\"\nexport * from \"./AttrItem.vue?vue&type=script&lang=ts\"\n\nimport \"./AttrItem.vue?vue&type=style&index=0&id=33d457f0&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-33d457f0\"\n\nexport default script","<template>\r\n\t<div class=\"name\" @click=\"selectCurWidget\">\r\n\t\t{{ me.type }}\r\n\t</div>\r\n\t<button v-if=\"me.type === widgetType.STACK\" @click=\"isShow = !isShow\">{{ isShow ? 'v' : '>' }}</button>\r\n\t<div v-if=\"me.type === widgetType.STACK\">\r\n\t\t<div class=\"node\" v-for=\"node in me.realNodes\" :key=\"node.id\" v-show=\"isShow\">\r\n\t\t\t<Node :me=\"node\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { dataKey, State, Widget, widgetType } from '@/types';\r\nimport { defineComponent, inject, PropType, reactive, ref } from 'vue';\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: {\r\n\t\t\ttype: Object as PropType<Widget>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst isShow = ref(false);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\treturn { widgetType, isShow, selectCurWidget };\r\n\t},\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.name {\r\n\tdisplay: inline-block;\r\n\tborder: black solid 1px;\r\n}\r\n.node {\r\n\tmargin-left: 20px;\r\n}\r\n</style>\r\n","\r\nimport { dataKey, State, Widget, widgetType } from '@/types';\r\nimport { defineComponent, inject, PropType, reactive, ref } from 'vue';\r\nexport default defineComponent({\r\n\tprops: {\r\n\t\tme: {\r\n\t\t\ttype: Object as PropType<Widget>,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t},\r\n\tsetup(props) {\r\n\t\tconst me = reactive(props.me);\r\n\t\tconst isShow = ref(false);\r\n\t\tconst state: State = inject<any>(dataKey.STATE);\r\n\r\n\t\t// 处理选中\r\n\t\tconst selectCurWidget = (e: MouseEvent) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tstate.curWidget = me;\r\n\t\t};\r\n\r\n\t\treturn { widgetType, isShow, selectCurWidget };\r\n\t},\r\n});\r\n","import { render } from \"./Node.vue?vue&type=template&id=092cb9ec&scoped=true\"\nimport script from \"./Node.vue?vue&type=script&lang=ts\"\nexport * from \"./Node.vue?vue&type=script&lang=ts\"\n\nimport \"./Node.vue?vue&type=style&index=0&id=092cb9ec&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-092cb9ec\"\n\nexport default script","import { createApp } from 'vue';\nimport App from './App.vue';\nimport Widget from './widget/index';\nimport AttrItem from './components/AttrItem.vue';\nimport Node from './components/Node.vue';\nimport moment from 'moment'\n\nconst app = createApp(App);\nmoment.locale('zh-cn')\n\n// 将Widget中的组件注册为Vue的全局组件\napp.component('ListWidget', Widget['ListWidget']);\napp.component('WidgetDate', Widget['WidgetDate']);\napp.component('WidgetImage', Widget['WidgetImage']);\napp.component('WidgetSpacer', Widget['WidgetSpacer']);\napp.component('WidgetText', Widget['WidgetText']);\napp.component('WidgetStack', Widget['WidgetStack']);\n\napp.component('AttrItem', AttrItem);\napp.component('Node', Node);\n\napp.mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetSpacer.vue?vue&type=style&index=0&id=7553e4e2&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Node.vue?vue&type=style&index=0&id=092cb9ec&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WidgetStack.vue?vue&type=style&index=0&id=6d792e0d&scoped=true&lang=css\""],"sourceRoot":""}