{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/List.vue?53d8","webpack:///./src/components/Detail.vue?ff7d","webpack:///./src/components/Task.vue?3b26","webpack:///./src/App.vue?12c3","webpack:///./src/components/Add.vue?94af","webpack:///./src/types.ts","webpack:///./src/components/Add.vue","webpack:///./src/components/Add.vue?13fc","webpack:///./src/components/List.vue?1c87","webpack:///./src/components/Task.vue?475e","webpack:///./src/components/Detail.vue?b4be","webpack:///./src/components/Detail.vue","webpack:///./src/components/Detail.vue?4f94","webpack:///./src/util/request.ts","webpack:///./src/util/applyURL.ts","webpack:///./src/util/storeChips.ts","webpack:///./src/util/aesDecryptor.ts","webpack:///./src/util/checkTSHeader.ts","webpack:///./src/util/createChipTask.ts","webpack:///./src/components/Task.vue","webpack:///./src/components/Task.vue?68f9","webpack:///./src/util/manager.ts","webpack:///./src/components/List.vue","webpack:///./src/components/List.vue?3429","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/main.ts","webpack:///./src/App.vue?b145"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","_component_Add","_resolveComponent","_component_List","_openBlock","_createElementBlock","_createVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_withDirectives","type","$event","placeholder","_vModelText","url","disabled","onClick","args","addTaskByURL","upload","style","filename","fileContent","addTaskByFile","Status","defineComponent","methods","fileHandle","showOpenFilePicker","file","getFile","test","this","text","alert","id","taskIndex","now","Date","task","getMonth","getDate","content","status","Loading","progress","duration","chipArray","keys","Map","isUseMP4Format","taskList","clearInputs","setup","inject","ref","__exports__","_component_TaskComp","changeWorkerStatus","_toDisplayString","isRunning","autoRetryAll","isRetring","min","workerCount","onChange","adjustWorkerCount","_Fragment","_renderList","manager","remove","_component_Detail","retryTask","_normalizeClass","taskStatusClass","_vShow","isShowEncryptedBadge","hours","minutes","seconds","_normalizeStyle","width","Math","floor","handleSPRBtn","Ready","textOfSPRBtn","retryAllChips","isNeedRetryChips","isShowDetail","isStarted","_vModelCheckbox","for","isSaveWhileDownloading","saveChips","chip","_createBlock","retryChip","detailClass","props","required","watchEffect","Ok","Fail","callback","isReturnArraybuffer","fetch","then","res","arrayBuffer","success","catch","error","fail","syncFetch","async","targetURL","baseURL","location","href","domain","split","replace","fileDataList","fileName","fileBlob","Blob","a","document","createElement","download","URL","createObjectURL","display","body","appendChild","click","AESDecryptor","constructor","Uint32Array","initTable","uint8ArrayToUint32Array_","view","DataView","newArray","getUint32","sBox","invSBox","subMix","subMix0","subMix1","subMix2","subMix3","invSubMix","invSubMix0","invSubMix1","invSubMix2","invSubMix3","x","xi","sx","x2","x4","x8","expandKey","keyBuffer","sameKey","offset","keySize","Error","ksRows","ksRow","invKsRow","keySchedule","invKeySchedule","sbox","rcon","prev","networkToHostOrderSwap","word","decrypt","inputArrayBuffer","aesIV","nRounds","invSBOX","initVector","initVector0","initVector1","initVector2","initVector3","inputInt32","Int32Array","outputInt32","t0","t1","t2","t3","s0","s1","s2","s3","inputWords0","inputWords1","inputWords2","inputWords3","swapWord","buffer","getDefaultIVArrayBuffer","Uint8Array","checkTimes","curIndex","isNotTSHeader","header","syncByte","toString","transportErrorIndicator","transportScramblingControl","adaptationFieldControl","decryptor","convertToMP4Data","Promise","resolve","reject","transmuxer","muxjs","mp4","Transmuxer","keepOriginalTimestamps","round","on","seg","afterData","initSegment","byteLength","set","flush","taskFunc","aes","keyURI","applyURL","uri","has","iv","firstTSHeaderStartIndex","checkTSHeader","stream","index","writer","write","close","console","components","Detail","Function","computed","some","toRefs","m3u8Parser","Parser","streamsaver","supported","getTaskDetail","rawM3u8Data","end","m3u8","manifest","segments","totalDuration","reduce","prevDuration","ceil","indexOf","forEach","reactive","method","ready","request","rawContent","onMounted","startTask","mitm","createWriteStream","getWriter","submit","createChipTask","pauseTask","restoreTask","storeChips","map","every","taskQueue","pausedTaskIDs","Worker","undefined","_work","isPaused","findIndex","v","_wait","clearTimeout","_timer","setTimeout","_run","_stop","Manager","workers","idx","stopWorkers","worker","runWorkers","filter","adjust","count","info","pop","isWorking","TaskComp","abort","timer","clearInterval","setInterval","onunload","onbeforeunload","evt","returnValue","Add","List","provide","createApp","App","mount"],"mappings":"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","file":"js/app.517d48db.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./List.vue?vue&type=style&index=0&id=459b8f5a&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Detail.vue?vue&type=style&index=0&id=9771496a&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Task.vue?vue&type=style&index=0&id=335c5ce9&scoped=true&lang=css\"","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-412c04ed\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"body\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"display-4 text-center\" }, \"m3u8下载器\", -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"lead text-center\" }, \"testURL: https://cdn.theoplayer.com/video/big_buck_bunny_encrypted/stream-800/index.m3u8\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Add = _resolveComponent(\"Add\")!\n  const _component_List = _resolveComponent(\"List\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _hoisted_3,\n    _createVNode(_component_Add),\n    _createVNode(_component_List)\n  ]))\n}","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"card mb-2\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"card-header\" }, \"添加任务\", -1)\nconst _hoisted_3 = { class: \"card-body\" }\nconst _hoisted_4 = { class: \"input-group mb-1\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"input-group-prepend\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"input-group-text\" }, \"名称\")\n], -1)\nconst _hoisted_6 = { class: \"input-group mb-1\" }\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"input-group-prepend\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"input-group-text\" }, \"链接\")\n], -1)\nconst _hoisted_8 = { class: \"input-group-append\" }\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = { class: \"input-group mb-1\" }\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"input-group-prepend\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"input-group-text\" }, \"上传\")\n], -1)\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"input-group-append\" }\nconst _hoisted_14 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _hoisted_5,\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          class: \"form-control\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.name) = $event)),\n          placeholder: \"默认为“任务+id+日期”, 若是上传, 则默认为上传文件名\"\n        }, null, 512), [\n          [_vModelText, _ctx.name]\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _hoisted_7,\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"url\",\n          class: \"form-control\",\n          placeholder: \"通过 m3u8 链接下载, 请在此处输入 m3u8 视频的链接, 然后点击确定\",\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.url) = $event))\n        }, null, 512), [\n          [_vModelText, _ctx.url]\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"button\", {\n            class: \"btn btn-primary\",\n            disabled: !_ctx.url,\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.addTaskByURL && _ctx.addTaskByURL(...args)))\n          }, \"确定\", 8, _hoisted_9)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _hoisted_11,\n        _createElementVNode(\"input\", {\n          type: \"text\",\n          onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.upload && _ctx.upload(...args))),\n          class: \"form-control\",\n          style: {\"cursor\":\"pointer\",\"caret-color\":\"transparent\"},\n          value: _ctx.filename,\n          placeholder: \"通过 m3u8 文件下载, 请点击此处上传后缀为 .m3u8 的文件, 然后点击确定\"\n        }, null, 8, _hoisted_12),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            class: \"btn btn-primary\",\n            disabled: !_ctx.fileContent,\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.addTaskByFile && _ctx.addTaskByFile(...args)))\n          }, \"确定\", 8, _hoisted_14)\n        ])\n      ])\n    ])\n  ]))\n}","import { WritableStream } from 'streamsaver';\n\nexport enum Status {\n\tLoading = 'Loading',\n\tReady = 'Ready',\n\tOk = 'OK',\n\tFail = 'Fail',\n}\n\nexport type Aes = {\n\tmethod: string;\n\turi: string;\n\tiv: ArrayBuffer;\n};\n\nexport interface Chip {\n\turl: string;\n\tstatus: Status;\n\tdata: ArrayBuffer | null;\n\taes: Aes | null;\n\toffset: number;\n}\n\nexport interface Task {\n\tid: number;\n\tname: string;\n\turl: string;\n\tcontent: string;\n\tstatus: Status;\n\tprogress: number;\n\tchipArray: Array<Chip>;\n\tduration: number;\n\tkeys: Map<string, ArrayBuffer>;\n\tisUseMP4Format: boolean;\n\tstream?: {\n\t\twriter: {\n\t\t\twrite: (data: Uint8Array) => void;\n\t\t\tclose: () => void;\n\t\t\tabort: () => void;\n\t\t};\n\t\tindex: number;\n\t};\n}\n","\nimport { defineComponent, ref, inject } from 'vue';\nimport { Task, Status } from '../types';\n\nexport default defineComponent({\n\tmethods: {\n\t\tasync upload() {\n\t\t\tconst fileHandle = (await (window as any).showOpenFilePicker())[0];\n\t\t\tconst file = await fileHandle.getFile();\n\t\t\tif (!/.m3u8$/.test(file.name)) {\n\t\t\t\twindow.alert('请上传 m3u8 格式的文件!');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.filename = file.name;\n\t\t\tthis.fileContent = await file.text();\n\t\t},\n\t\taddTaskByURL()  {\n\t\t\tconst id = ++this.taskIndex;\n\t\t\tconst now = new Date();\n\t\t\tconst task: Task = {\n\t\t\t\tid: id,\n\t\t\t\tname: this.name || `任务${id}_${now.getMonth() + 1}-${now.getDate()}`,\n\t\t\t\turl: this.url,\n\t\t\t\tcontent: '',\n\t\t\t\tstatus: Status.Loading,\n\t\t\t\tprogress: 0,\n\t\t\t\tduration: 0,\n\t\t\t\tchipArray: [],\n\t\t\t\tkeys: new Map(),\n\t\t\t\tisUseMP4Format: true,\n\t\t\t};\n\t\t\tthis.taskList.push(task);\n\t\t\tthis.clearInputs()\n\t\t},\n\t\taddTaskByFile(){\n\t\t\tconst id = ++this.taskIndex;\n\t\t\tconst task: Task = {\n\t\t\t\tid: id,\n\t\t\t\tname: this.name || this.filename.slice(0, -5),\n\t\t\t\turl: '',\n\t\t\t\tcontent: this.fileContent,\n\t\t\t\tstatus: Status.Loading,\n\t\t\t\tprogress: 0,\n\t\t\t\tduration: 0,\n\t\t\t\tchipArray: [],\n\t\t\t\tkeys: new Map(),\n\t\t\t\tisUseMP4Format: true,\n\t\t\t};\n\t\t\tthis.taskList.push(task);\n\t\t\tthis.clearInputs()\n\t\t},\n\t\tclearInputs(){\n\t\t\tthis.name = '';\n\t\t\tthis.filename = '';\n\t\t\tthis.fileContent = '';\n\t\t\tthis.url = '';\n\t\t}\n\t},\n\tsetup() {\n\t\tconst taskList: Task[] = inject<any>('taskList');\n\t\tconst taskIndex = ref(0)\n\n\t\tconst name = ref('');\n\t\tconst url = ref('');\n\t\tconst fileContent = ref('');\n\t\tconst filename = ref('')\n\n\t\treturn { taskList, taskIndex, url, name, fileContent, filename };\n\t},\n});\n","import { render } from \"./Add.vue?vue&type=template&id=7d3a2035&ts=true\"\nimport script from \"./Add.vue?vue&type=script&lang=ts\"\nexport * from \"./Add.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"F:\\\\Involution Space\\\\something\\\\m3u8_downloader\\\\self\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-459b8f5a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"card\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"card-header\" }, \"任务详情\", -1))\nconst _hoisted_3 = { class: \"card-body\" }\nconst _hoisted_4 = { class: \"btn-toolbar mb-2\" }\nconst _hoisted_5 = { class: \"btn-group\" }\nconst _hoisted_6 = { class: \"input-group ms-2\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"input-group-prepend\" }, [\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"input-group-text\" }, \"线程数\")\n], -1))\nconst _hoisted_8 = { class: \"list-group\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TaskComp = _resolveComponent(\"TaskComp\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.changeWorkerStatus && _ctx.changeWorkerStatus(...args))),\n            class: \"btn btn-dark\"\n          }, _toDisplayString(_ctx.isRunning ? '停止' : '启动') + \"下载线程 \", 1),\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.autoRetryAll && _ctx.autoRetryAll(...args))),\n            class: \"btn btn-dark\"\n          }, _toDisplayString(_ctx.isRetring ? '关闭' : '自动') + \"重试错误片段 \", 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"number\",\n            class: \"form-control\",\n            min: \"1\",\n            style: {\"width\":\"70px\"},\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.workerCount) = $event)),\n            onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.adjustWorkerCount && _ctx.adjustWorkerCount(...args)))\n          }, null, 544), [\n            [_vModelText, _ctx.workerCount]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"ul\", _hoisted_8, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskList, (task) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            class: \"list-group-item\",\n            key: task.id\n          }, [\n            _createVNode(_component_TaskComp, {\n              task: task,\n              manager: _ctx.manager,\n              remove: _ctx.remove\n            }, null, 8, [\"task\", \"manager\", \"remove\"])\n          ]))\n        }), 128))\n      ])\n    ])\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-335c5ce9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"lead mb-1\" }\nconst _hoisted_2 = { class: \"me-2 font-monospace\" }\nconst _hoisted_3 = { class: \"badge bg-warning ms-1\" }\nconst _hoisted_4 = {\n  class: \"ms-2 font-monospace\",\n  style: {\"font-size\":\"16px\"}\n}\nconst _hoisted_5 = { class: \"progress mb-2\" }\nconst _hoisted_6 = { class: \"btn-group mb-1\" }\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"disabled\", \"id\"]\nconst _hoisted_10 = [\"for\"]\nconst _hoisted_11 = [\"disabled\", \"id\"]\nconst _hoisted_12 = [\"for\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Detail = _resolveComponent(\"Detail\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"p\", _hoisted_1, [\n      _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.task.name), 1),\n      _createElementVNode(\"span\", {\n        onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.retryTask && _ctx.retryTask(...args))),\n        class: _normalizeClass(_ctx.taskStatusClass)\n      }, _toDisplayString(_ctx.task.status), 3),\n      _withDirectives(_createElementVNode(\"span\", _hoisted_3, \"加密\", 512), [\n        [_vShow, _ctx.isShowEncryptedBadge]\n      ]),\n      _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.hours) + \":\" + _toDisplayString(_ctx.minutes) + \":\" + _toDisplayString(_ctx.seconds), 1)\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"span\", {\n        class: \"progress-bar progress-bar-striped bg-success\",\n        style: _normalizeStyle({\n\t\t\t\twidth: Math.floor((_ctx.task.progress * 100) / _ctx.task.chipArray.length) + '%',\n\t\t\t})\n      }, null, 4)\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createElementVNode(\"button\", {\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.handleSPRBtn && _ctx.handleSPRBtn(...args))),\n        disabled: _ctx.task.status !== _ctx.Status.Ready,\n        class: \"btn btn-primary btn-sm\"\n      }, _toDisplayString(_ctx.textOfSPRBtn), 9, _hoisted_7),\n      _createElementVNode(\"button\", {\n        onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.retryAllChips && _ctx.retryAllChips(...args))),\n        disabled: !_ctx.isNeedRetryChips,\n        class: \"btn btn-info btn-sm text-white\"\n      }, \"重试错误片段\", 8, _hoisted_8),\n      _createElementVNode(\"button\", {\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.remove(_ctx.task.id))),\n        class: \"btn btn-danger btn-sm\"\n      }, \"删除\"),\n      _createElementVNode(\"button\", {\n        onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.isShowDetail = !_ctx.isShowDetail)),\n        class: \"btn btn-secondary btn-sm\"\n      }, \" 详情 \"),\n      _withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        disabled: _ctx.isStarted,\n        class: \"btn-check\",\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.isUseMP4Format) = $event)),\n        id: _ctx.task.id+'useMP4Format'\n      }, null, 8, _hoisted_9), [\n        [_vModelCheckbox, _ctx.isUseMP4Format]\n      ]),\n      _createElementVNode(\"label\", {\n        class: \"btn btn-outline-dark btn-sm\",\n        for: _ctx.task.id+'useMP4Format'\n      }, \"将保存为 \" + _toDisplayString(_ctx.isUseMP4Format ? \"mp4\" : \"ts\") + \" 格式\", 9, _hoisted_10),\n      _withDirectives(_createElementVNode(\"input\", {\n        type: \"checkbox\",\n        disabled: _ctx.isStarted,\n        class: \"btn-check\",\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.isSaveWhileDownloading) = $event)),\n        id: _ctx.task.id+'saveWhileDownloading'\n      }, null, 8, _hoisted_11), [\n        [_vModelCheckbox, _ctx.isSaveWhileDownloading]\n      ]),\n      _createElementVNode(\"label\", {\n        class: \"btn btn-outline-success btn-sm\",\n        for: _ctx.task.id+'saveWhileDownloading'\n      }, \"已\" + _toDisplayString(_ctx.isSaveWhileDownloading ? \"开启\" : \"关闭\") + \"边下载边保存功能\", 9, _hoisted_12),\n      _withDirectives(_createElementVNode(\"button\", {\n        onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.saveChips && _ctx.saveChips(...args))),\n        class: \"btn btn-success btn-sm\"\n      }, \"保存已下载片段\", 512), [\n        [_vShow, !_ctx.isSaveWhileDownloading]\n      ])\n    ]),\n    _withDirectives(_createElementVNode(\"div\", null, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.task.chipArray, (chip, i) => {\n        return (_openBlock(), _createBlock(_component_Detail, {\n          key: i,\n          chip: chip,\n          onClick: ($event: any) => (_ctx.retryChip(chip))\n        }, null, 8, [\"chip\", \"onClick\"]))\n      }), 128))\n    ], 512), [\n      [_vShow, _ctx.isShowDetail]\n    ])\n  ], 64))\n}","import { normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(_ctx.detailClass)\n  }, null, 2))\n}","\nimport { defineComponent, PropType, ref, watchEffect } from 'vue';\nimport { Status, Chip } from '../types';\n\nexport default defineComponent({\n\tprops: {\n\t\tchip: {\n\t\t\ttype: Object as PropType<Chip>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst detailClass = ref<string>('rounded');\n\t\twatchEffect(() => {\n\t\t\tconst status = props.chip.status;\n\t\t\tif (status === Status.Loading) {\n\t\t\t\tdetailClass.value = 'rounded loading';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status === Status.Ready) {\n\t\t\t\tdetailClass.value = 'rounded ready';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status === Status.Ok) {\n\t\t\t\tdetailClass.value = 'rounded ok';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status === Status.Fail) {\n\t\t\t\tdetailClass.value = 'rounded fail';\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t\treturn { detailClass };\n\t},\n});\n","import { render } from \"./Detail.vue?vue&type=template&id=9771496a&scoped=true&ts=true\"\nimport script from \"./Detail.vue?vue&type=script&lang=ts\"\nexport * from \"./Detail.vue?vue&type=script&lang=ts\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=9771496a&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\Involution Space\\\\something\\\\m3u8_downloader\\\\self\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9771496a\"]])\n\nexport default __exports__","interface Callback {\n\tsuccess?: (data: ArrayBuffer | string) => any;\n\tfail?: (error: Error) => any;\n}\n// 使用fetch来请求数据\nexport default (url: string, callback: Callback, isReturnArraybuffer = false) => {\n\tfetch(url)\n\t\t.then((res): Promise<ArrayBuffer | string> => {\n\t\t\tif (isReturnArraybuffer) return res.arrayBuffer();\n\t\t\treturn res.text();\n\t\t})\n\t\t.then(data => callback.success && callback.success(data))\n\t\t.catch(error => callback.fail && callback.fail(error));\n};\n\n// 同步请求数据\nexport const syncFetch = async (url: string, isReturnArraybuffer = false) => {\n\treturn await fetch(url).then((res): Promise<ArrayBuffer | string> => {\n\t\tif (isReturnArraybuffer) return res.arrayBuffer();\n\t\treturn res.text();\n\t});\n};\n","// 用于目标URL转换成ts格式的URL\nexport default (targetURL: string, baseURL: string) => {\n\tbaseURL = baseURL || location.href;\n\tlet result = '';\n\tif (/^http/.test(targetURL)) {\n\t\t// 本身是ts地址，不需要转换\n\t\tresult = targetURL;\n\t} else if (targetURL[0] === '/') {\n\t\t// 未知\n\t\tconst domain = baseURL.split('/');\n\t\tresult = domain[0] + '//' + domain[2] + targetURL;\n\t} else {\n\t\t// 将targetURL拼接在baseURL的尾部\n\t\tresult = baseURL.replace(/\\/[^/]*?$/, '/' + targetURL);\n\t}\n\treturn result;\n};\n","// 利用a标签的下载功能将视频保存到本地\nexport default (fileDataList: Array<ArrayBuffer> | undefined, fileName: string, isUseMP4Format = true) => {\n\tlet fileBlob;\n\tlet name;\n\tif(isUseMP4Format){\n\t\tfileBlob = new Blob(fileDataList, { type: 'video/mp4' });\n\t\tname = fileName + '.mp4';\n\t}else{\n\t\tfileBlob = new Blob(fileDataList, { type: 'video/MP2T' });\n\t\tname = fileName + '.ts';\n\t}\n\n\tconst a = document.createElement('a');\n\ta.download = name;\n\ta.href = URL.createObjectURL(fileBlob);\n\ta.style.display = 'none';\n\tdocument.body.appendChild(a);\n\ta.click();\n\ta.remove();\n};\n","function sliceUint8(array: Uint8Array, start?: number, end?: number): Uint8Array {\r\n\t// @ts-expect-error This polyfills IE11 usage of Uint8Array slice.\r\n\t// It always exists in the TypeScript definition so fails, but it fails at runtime on IE11.\r\n\treturn Uint8Array.prototype.slice\r\n\t\t? array.slice(start, end)\r\n\t\t: new Uint8Array(Array.prototype.slice.call(array, start, end));\r\n}\r\n\r\n// PKCS7\r\nexport function removePadding(array: Uint8Array): Uint8Array {\r\n\tconst outputBytes = array.byteLength;\r\n\tconst paddingBytes =\r\n\t\toutputBytes && new DataView(array.buffer).getUint8(outputBytes - 1);\r\n\tif (paddingBytes) {\r\n\t\treturn sliceUint8(array, 0, outputBytes - paddingBytes);\r\n\t}\r\n\treturn array;\r\n}\r\n\r\nexport class AESDecryptor {\r\n\tprivate rcon: Array<number> = [\r\n\t\t0x0, 0x1, 0x2, 0x4, 0x8, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36,\r\n\t];\r\n\tprivate subMix: Array<Uint32Array> = [\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t];\r\n\tprivate invSubMix: Array<Uint32Array> = [\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t\tnew Uint32Array(256),\r\n\t];\r\n\tprivate sBox: Uint32Array = new Uint32Array(256);\r\n\tprivate invSBox: Uint32Array = new Uint32Array(256);\r\n\tprivate key: Uint32Array = new Uint32Array(0);\r\n\r\n\tprivate ksRows = 0;\r\n\tprivate keySize = 0;\r\n\tprivate keySchedule!: Uint32Array;\r\n\tprivate invKeySchedule!: Uint32Array;\r\n\r\n\tconstructor() {\r\n\t\tthis.initTable();\r\n\t}\r\n\r\n\t// Using view.getUint32() also swaps the byte order.\r\n\tuint8ArrayToUint32Array_(arrayBuffer: ArrayBuffer) {\r\n\t\tconst view = new DataView(arrayBuffer);\r\n\t\tconst newArray = new Uint32Array(4);\r\n\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\tnewArray[i] = view.getUint32(i * 4);\r\n\t\t}\r\n\r\n\t\treturn newArray;\r\n\t}\r\n\r\n\tinitTable() {\r\n\t\tconst sBox = this.sBox;\r\n\t\tconst invSBox = this.invSBox;\r\n\t\tconst subMix = this.subMix;\r\n\t\tconst subMix0 = subMix[0];\r\n\t\tconst subMix1 = subMix[1];\r\n\t\tconst subMix2 = subMix[2];\r\n\t\tconst subMix3 = subMix[3];\r\n\t\tconst invSubMix = this.invSubMix;\r\n\t\tconst invSubMix0 = invSubMix[0];\r\n\t\tconst invSubMix1 = invSubMix[1];\r\n\t\tconst invSubMix2 = invSubMix[2];\r\n\t\tconst invSubMix3 = invSubMix[3];\r\n\r\n\t\tconst d = new Uint32Array(256);\r\n\t\tlet x = 0;\r\n\t\tlet xi = 0;\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < 256; i++) {\r\n\t\t\tif (i < 128) {\r\n\t\t\t\td[i] = i << 1;\r\n\t\t\t} else {\r\n\t\t\t\td[i] = (i << 1) ^ 0x11b;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < 256; i++) {\r\n\t\t\tlet sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\r\n\t\t\tsx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\r\n\t\t\tsBox[x] = sx;\r\n\t\t\tinvSBox[sx] = x;\r\n\r\n\t\t\t// Compute multiplication\r\n\t\t\tconst x2 = d[x];\r\n\t\t\tconst x4 = d[x2];\r\n\t\t\tconst x8 = d[x4];\r\n\r\n\t\t\t// Compute sub/invSub bytes, mix columns tables\r\n\t\t\tlet t = (d[sx] * 0x101) ^ (sx * 0x1010100);\r\n\t\t\tsubMix0[x] = (t << 24) | (t >>> 8);\r\n\t\t\tsubMix1[x] = (t << 16) | (t >>> 16);\r\n\t\t\tsubMix2[x] = (t << 8) | (t >>> 24);\r\n\t\t\tsubMix3[x] = t;\r\n\r\n\t\t\t// Compute inv sub bytes, inv mix columns tables\r\n\t\t\tt = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\r\n\t\t\tinvSubMix0[sx] = (t << 24) | (t >>> 8);\r\n\t\t\tinvSubMix1[sx] = (t << 16) | (t >>> 16);\r\n\t\t\tinvSubMix2[sx] = (t << 8) | (t >>> 24);\r\n\t\t\tinvSubMix3[sx] = t;\r\n\r\n\t\t\t// Compute next counter\r\n\t\t\tif (!x) {\r\n\t\t\t\tx = xi = 1;\r\n\t\t\t} else {\r\n\t\t\t\tx = x2 ^ d[d[d[x8 ^ x2]]];\r\n\t\t\t\txi ^= d[d[xi]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\texpandKey(keyBuffer: ArrayBuffer) {\r\n\t\t// convert keyBuffer to Uint32Array\r\n\t\tconst key = this.uint8ArrayToUint32Array_(keyBuffer);\r\n\t\tlet sameKey = true;\r\n\t\tlet offset = 0;\r\n\r\n\t\twhile (offset < key.length && sameKey) {\r\n\t\t\tsameKey = key[offset] === this.key[offset];\r\n\t\t\toffset++;\r\n\t\t}\r\n\r\n\t\tif (sameKey) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.key = key;\r\n\t\tconst keySize = (this.keySize = key.length);\r\n\r\n\t\tif (keySize !== 4 && keySize !== 6 && keySize !== 8) {\r\n\t\t\tthrow new Error('Invalid aes key size=' + keySize);\r\n\t\t}\r\n\r\n\t\tconst ksRows = (this.ksRows = (keySize + 6 + 1) * 4);\r\n\t\tlet ksRow;\r\n\t\tlet invKsRow;\r\n\r\n\t\tconst keySchedule = (this.keySchedule = new Uint32Array(ksRows));\r\n\t\tconst invKeySchedule = (this.invKeySchedule = new Uint32Array(ksRows));\r\n\t\tconst sbox = this.sBox;\r\n\t\tconst rcon = this.rcon;\r\n\r\n\t\tconst invSubMix = this.invSubMix;\r\n\t\tconst invSubMix0 = invSubMix[0];\r\n\t\tconst invSubMix1 = invSubMix[1];\r\n\t\tconst invSubMix2 = invSubMix[2];\r\n\t\tconst invSubMix3 = invSubMix[3];\r\n\r\n\t\tlet prev;\r\n\t\tlet t;\r\n\r\n\t\tfor (ksRow = 0; ksRow < ksRows; ksRow++) {\r\n\t\t\tif (ksRow < keySize) {\r\n\t\t\t\tprev = keySchedule[ksRow] = key[ksRow];\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tt = prev as number;\r\n\r\n\t\t\tif (ksRow % keySize === 0) {\r\n\t\t\t\t// Rot word\r\n\t\t\t\tt = (t << 8) | (t >>> 24);\r\n\r\n\t\t\t\t// Sub word\r\n\t\t\t\tt =\r\n\t\t\t\t\t(sbox[t >>> 24] << 24) |\r\n\t\t\t\t\t(sbox[(t >>> 16) & 0xff] << 16) |\r\n\t\t\t\t\t(sbox[(t >>> 8) & 0xff] << 8) |\r\n\t\t\t\t\tsbox[t & 0xff];\r\n\r\n\t\t\t\t// Mix Rcon\r\n\t\t\t\tt ^= rcon[(ksRow / keySize) | 0] << 24;\r\n\t\t\t} else if (keySize > 6 && ksRow % keySize === 4) {\r\n\t\t\t\t// Sub word\r\n\t\t\t\tt =\r\n\t\t\t\t\t(sbox[t >>> 24] << 24) |\r\n\t\t\t\t\t(sbox[(t >>> 16) & 0xff] << 16) |\r\n\t\t\t\t\t(sbox[(t >>> 8) & 0xff] << 8) |\r\n\t\t\t\t\tsbox[t & 0xff];\r\n\t\t\t}\r\n\r\n\t\t\tkeySchedule[ksRow] = prev = (keySchedule[ksRow - keySize] ^ t) >>> 0;\r\n\t\t}\r\n\r\n\t\tfor (invKsRow = 0; invKsRow < ksRows; invKsRow++) {\r\n\t\t\tksRow = ksRows - invKsRow;\r\n\t\t\tif (invKsRow & 3) {\r\n\t\t\t\tt = keySchedule[ksRow];\r\n\t\t\t} else {\r\n\t\t\t\tt = keySchedule[ksRow - 4];\r\n\t\t\t}\r\n\r\n\t\t\tif (invKsRow < 4 || ksRow <= 4) {\r\n\t\t\t\tinvKeySchedule[invKsRow] = t;\r\n\t\t\t} else {\r\n\t\t\t\tinvKeySchedule[invKsRow] =\r\n\t\t\t\t\tinvSubMix0[sbox[t >>> 24]] ^\r\n\t\t\t\t\tinvSubMix1[sbox[(t >>> 16) & 0xff]] ^\r\n\t\t\t\t\tinvSubMix2[sbox[(t >>> 8) & 0xff]] ^\r\n\t\t\t\t\tinvSubMix3[sbox[t & 0xff]];\r\n\t\t\t}\r\n\r\n\t\t\tinvKeySchedule[invKsRow] = invKeySchedule[invKsRow] >>> 0;\r\n\t\t}\r\n\t}\r\n\r\n\t// Adding this as a method greatly improves performance.\r\n\tnetworkToHostOrderSwap(word: number) {\r\n\t\treturn (\r\n\t\t\t(word << 24) |\r\n\t\t\t((word & 0xff00) << 8) |\r\n\t\t\t((word & 0xff0000) >> 8) |\r\n\t\t\t(word >>> 24)\r\n\t\t);\r\n\t}\r\n\r\n\tdecrypt(inputArrayBuffer: ArrayBuffer, offset: number, aesIV: ArrayBuffer) {\r\n\t\tconst nRounds = this.keySize + 6;\r\n\t\tconst invKeySchedule = this.invKeySchedule;\r\n\t\tconst invSBOX = this.invSBox;\r\n\r\n\t\tconst invSubMix = this.invSubMix;\r\n\t\tconst invSubMix0 = invSubMix[0];\r\n\t\tconst invSubMix1 = invSubMix[1];\r\n\t\tconst invSubMix2 = invSubMix[2];\r\n\t\tconst invSubMix3 = invSubMix[3];\r\n\r\n\t\tconst initVector = this.uint8ArrayToUint32Array_(aesIV);\r\n\t\tlet initVector0 = initVector[0];\r\n\t\tlet initVector1 = initVector[1];\r\n\t\tlet initVector2 = initVector[2];\r\n\t\tlet initVector3 = initVector[3];\r\n\r\n\t\tconst inputInt32 = new Int32Array(inputArrayBuffer);\r\n\t\tconst outputInt32 = new Int32Array(inputInt32.length);\r\n\r\n\t\tlet t0, t1, t2, t3;\r\n\t\tlet s0, s1, s2, s3;\r\n\t\tlet inputWords0, inputWords1, inputWords2, inputWords3;\r\n\r\n\t\tlet ksRow, i;\r\n\t\tconst swapWord = this.networkToHostOrderSwap;\r\n\r\n\t\twhile (offset < inputInt32.length) {\r\n\t\t\tinputWords0 = swapWord(inputInt32[offset]);\r\n\t\t\tinputWords1 = swapWord(inputInt32[offset + 1]);\r\n\t\t\tinputWords2 = swapWord(inputInt32[offset + 2]);\r\n\t\t\tinputWords3 = swapWord(inputInt32[offset + 3]);\r\n\r\n\t\t\ts0 = inputWords0 ^ invKeySchedule[0];\r\n\t\t\ts1 = inputWords3 ^ invKeySchedule[1];\r\n\t\t\ts2 = inputWords2 ^ invKeySchedule[2];\r\n\t\t\ts3 = inputWords1 ^ invKeySchedule[3];\r\n\r\n\t\t\tksRow = 4;\r\n\r\n\t\t\t// Iterate through the rounds of decryption\r\n\t\t\tfor (i = 1; i < nRounds; i++) {\r\n\t\t\t\tt0 =\r\n\t\t\t\t\tinvSubMix0[s0 >>> 24] ^\r\n\t\t\t\t\tinvSubMix1[(s1 >> 16) & 0xff] ^\r\n\t\t\t\t\tinvSubMix2[(s2 >> 8) & 0xff] ^\r\n\t\t\t\t\tinvSubMix3[s3 & 0xff] ^\r\n\t\t\t\t\tinvKeySchedule[ksRow];\r\n\t\t\t\tt1 =\r\n\t\t\t\t\tinvSubMix0[s1 >>> 24] ^\r\n\t\t\t\t\tinvSubMix1[(s2 >> 16) & 0xff] ^\r\n\t\t\t\t\tinvSubMix2[(s3 >> 8) & 0xff] ^\r\n\t\t\t\t\tinvSubMix3[s0 & 0xff] ^\r\n\t\t\t\t\tinvKeySchedule[ksRow + 1];\r\n\t\t\t\tt2 =\r\n\t\t\t\t\tinvSubMix0[s2 >>> 24] ^\r\n\t\t\t\t\tinvSubMix1[(s3 >> 16) & 0xff] ^\r\n\t\t\t\t\tinvSubMix2[(s0 >> 8) & 0xff] ^\r\n\t\t\t\t\tinvSubMix3[s1 & 0xff] ^\r\n\t\t\t\t\tinvKeySchedule[ksRow + 2];\r\n\t\t\t\tt3 =\r\n\t\t\t\t\tinvSubMix0[s3 >>> 24] ^\r\n\t\t\t\t\tinvSubMix1[(s0 >> 16) & 0xff] ^\r\n\t\t\t\t\tinvSubMix2[(s1 >> 8) & 0xff] ^\r\n\t\t\t\t\tinvSubMix3[s2 & 0xff] ^\r\n\t\t\t\t\tinvKeySchedule[ksRow + 3];\r\n\t\t\t\t// Update state\r\n\t\t\t\ts0 = t0;\r\n\t\t\t\ts1 = t1;\r\n\t\t\t\ts2 = t2;\r\n\t\t\t\ts3 = t3;\r\n\r\n\t\t\t\tksRow = ksRow + 4;\r\n\t\t\t}\r\n\r\n\t\t\t// Shift rows, sub bytes, add round key\r\n\t\t\tt0 =\r\n\t\t\t\t(invSBOX[s0 >>> 24] << 24) ^\r\n\t\t\t\t(invSBOX[(s1 >> 16) & 0xff] << 16) ^\r\n\t\t\t\t(invSBOX[(s2 >> 8) & 0xff] << 8) ^\r\n\t\t\t\tinvSBOX[s3 & 0xff] ^\r\n\t\t\t\tinvKeySchedule[ksRow];\r\n\t\t\tt1 =\r\n\t\t\t\t(invSBOX[s1 >>> 24] << 24) ^\r\n\t\t\t\t(invSBOX[(s2 >> 16) & 0xff] << 16) ^\r\n\t\t\t\t(invSBOX[(s3 >> 8) & 0xff] << 8) ^\r\n\t\t\t\tinvSBOX[s0 & 0xff] ^\r\n\t\t\t\tinvKeySchedule[ksRow + 1];\r\n\t\t\tt2 =\r\n\t\t\t\t(invSBOX[s2 >>> 24] << 24) ^\r\n\t\t\t\t(invSBOX[(s3 >> 16) & 0xff] << 16) ^\r\n\t\t\t\t(invSBOX[(s0 >> 8) & 0xff] << 8) ^\r\n\t\t\t\tinvSBOX[s1 & 0xff] ^\r\n\t\t\t\tinvKeySchedule[ksRow + 2];\r\n\t\t\tt3 =\r\n\t\t\t\t(invSBOX[s3 >>> 24] << 24) ^\r\n\t\t\t\t(invSBOX[(s0 >> 16) & 0xff] << 16) ^\r\n\t\t\t\t(invSBOX[(s1 >> 8) & 0xff] << 8) ^\r\n\t\t\t\tinvSBOX[s2 & 0xff] ^\r\n\t\t\t\tinvKeySchedule[ksRow + 3];\r\n\r\n\t\t\t// Write\r\n\t\t\toutputInt32[offset] = swapWord(t0 ^ initVector0);\r\n\t\t\toutputInt32[offset + 1] = swapWord(t3 ^ initVector1);\r\n\t\t\toutputInt32[offset + 2] = swapWord(t2 ^ initVector2);\r\n\t\t\toutputInt32[offset + 3] = swapWord(t1 ^ initVector3);\r\n\r\n\t\t\t// reset initVector to last 4 unsigned int\r\n\t\t\tinitVector0 = inputWords0;\r\n\t\t\tinitVector1 = inputWords1;\r\n\t\t\tinitVector2 = inputWords2;\r\n\t\t\tinitVector3 = inputWords3;\r\n\r\n\t\t\toffset = offset + 4;\r\n\t\t}\r\n\r\n\t\treturn outputInt32.buffer;\r\n\t}\r\n}\r\n\r\nexport const getDefaultIVArrayBuffer = (offset: number) =>\r\n\tnew Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, offset]).buffer;\r\n","export default (arrayBuffer: ArrayBuffer, checkTimes = 188) => {\r\n\tlet curIndex = 0;\r\n\tlet isNotTSHeader = true;\r\n\r\n\twhile (isNotTSHeader) {\r\n\t\tif (curIndex >= checkTimes) return 0;\r\n\r\n\t\tconst header = new Uint8Array(arrayBuffer.slice(curIndex, curIndex + 4));\r\n\r\n\t\tcurIndex++;\r\n\r\n\t\tconst syncByte = header[0].toString(16);\r\n\t\tif (syncByte !== '47') continue;\r\n\r\n\t\tconst transportErrorIndicator = ((header[1] & 0x80) >>> 7).toString(2);\r\n\t\tif (transportErrorIndicator !== '0') continue;\r\n\r\n\t\t// const payloadUnitStartIndicator = ((header[1] & 0x40) >>> 6).toString(2);\r\n\t\t// const transportPriority = ((header[1] & 0x20) >>> 5).toString(2);\r\n\t\t// const PID = (((header[1] & 0x1f) << 8) | header[2]).toString(16);\r\n\r\n\t\tconst transportScramblingControl = ((header[3] & 0xc0) >>> 6).toString(2);\r\n\t\tif (transportScramblingControl === '01') continue;\r\n\r\n\t\tconst adaptationFieldControl = ((header[3] & 0x30) >>> 4).toString(2);\r\n\t\tif (adaptationFieldControl === '00') continue;\r\n\r\n\t\t// const continuityCounter = (header[3] & 0x0f).toString(16);\r\n\r\n\t\tisNotTSHeader = false;\r\n\t}\r\n\r\n\treturn curIndex - 1;\r\n};\r\n","import { Status, Chip, Task, Aes } from '../types';\nimport { syncFetch } from './request';\nimport { AESDecryptor } from './aesDecryptor';\nimport muxjs from 'mux.js';\nimport applyURL from './applyURL';\nimport checkTSHeader from './checkTSHeader';\n\nconst decryptor = new AESDecryptor();\n\nconst convertToMP4Data = (data: ArrayBuffer, duration: number, offset: number) => {\n\treturn new Promise<ArrayBuffer>((resolve, reject) => {\n\t\tconst transmuxer = new muxjs.mp4.Transmuxer({\n\t\t\tkeepOriginalTimestamps: true,\n\t\t\tduration: Math.round(duration),\n\t\t});\n\n\t\ttransmuxer.on('data', (seg: any) => {\n\t\t\tlet afterData;\n\t\t\tif (offset === 0) {\n\t\t\t\tafterData = new Uint8Array(\n\t\t\t\t\tseg.initSegment.byteLength + seg.data.byteLength\n\t\t\t\t);\n\t\t\t\tafterData.set(seg.initSegment, 0);\n\t\t\t\tafterData.set(seg.data, seg.initSegment.byteLength);\n\t\t\t\tafterData = afterData.buffer;\n\t\t\t} else afterData = seg.data;\n\n\t\t\tresolve(afterData);\n\t\t});\n\n\t\ttransmuxer.push(new Uint8Array(data));\n\t\ttransmuxer.flush();\n\t});\n};\n\nexport default (chip: Chip, task: Task) => {\n\tconst taskFunc = async () => {\n\t\ttry {\n\t\t\tchip.status = Status.Loading // 切换成正在下载的状态\n\n\t\t\t// 判断有无加密, 有的话就需要先去获取key\n\t\t\tlet key = null;\n\t\t\tif (chip.aes) {\n\t\t\t\tconst keyURI = applyURL(chip.aes.uri, task.url);\n\t\t\t\t// 获取key\n\t\t\t\tif (task.keys.has(keyURI)) key = task.keys.get(keyURI) as ArrayBuffer;\n\t\t\t\telse {\n\t\t\t\t\tkey = (await syncFetch(keyURI, true)) as ArrayBuffer;\n\t\t\t\t\ttask.keys.set(keyURI, key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 获取ts片段的数据\n\t\t\tlet data = (await syncFetch(chip.url, true)) as ArrayBuffer;\n\n\t\t\t// 有key的话就说明需要对data进行解密\n\t\t\tif (key) {\n\t\t\t\tdecryptor.expandKey(key);\n\t\t\t\tdata = decryptor.decrypt(data, 0, (chip.aes as Aes).iv);\n\t\t\t}\n\n\t\t\t// 校验并移除混淆字节\n\t\t\tconst firstTSHeaderStartIndex = checkTSHeader(data);\n\t\t\tdata = data.slice(firstTSHeaderStartIndex);\n\n\t\t\t// 转换为 mp4 格式\n\t\t\tif (task.isUseMP4Format)\n\t\t\t\tdata = await convertToMP4Data(data, task.duration, chip.offset);\n\n\t\t\tchip.data = data;\n\t\t\tchip.status = Status.Ok;\n\t\t\ttask.progress++;\n\n\t\t\t// 边下载边保存\n\t\t\tif (task.stream) {\n\t\t\t\tfor (let i = task.stream.index; i < task.chipArray.length; i++) {\n\t\t\t\t\tconst data = task.chipArray[i].data;\n\t\t\t\t\tif (data !== null) {\n\t\t\t\t\t\ttask.stream.writer.write(new Uint8Array(data));\n\t\t\t\t\t\ttask.chipArray[i].data = null;\n\t\t\t\t\t\ttask.stream.index++;\n\t\t\t\t\t} else break;\n\t\t\t\t}\n\t\t\t\tif (task.stream.index >= task.chipArray.length)\n\t\t\t\t\ttask.stream.writer.close();\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tchip.status = Status.Fail;\n\t\t}\n\t};\n\ttaskFunc.id = task.id;\n\treturn taskFunc;\n};\n","\nimport {\n\tdefineComponent,\n\tonMounted,\n\tPropType,\n\treactive,\n\tref,\n\ttoRefs,\n\twatchEffect,\n} from 'vue';\nimport Detail from './Detail.vue';\nimport { Task, Status, Chip } from '../types';\nimport request from '../util/request';\nimport applyURL from '../util/applyURL';\nimport storeChips from '../util/storeChips';\nimport createChipTask from '../util/createChipTask';\nimport Manager from '../util/manager';\nimport { Parser } from 'm3u8-parser';\nimport { getDefaultIVArrayBuffer } from '../util/aesDecryptor';\nimport streamsaver from 'streamsaver'\n\nexport default defineComponent({\n\tcomponents: { Detail },\n\tprops: {\n\t\ttask: { type: Object as PropType<Task>, required: true },\n\t\tmanager: { type: Object as PropType<Manager>, required: true },\n\t\tremove: { type: Function, required: true },\n\t},\n\tcomputed: {\n\t\ttextOfSPRBtn(){\n\t\t\tif(this.task.status === Status.Ok) return '下载完成'\n\t\t\tif(!this.isStarted) return '开始下载'\n\t\t\tif(this.isRunning) return '暂停下载'\n\t\t\treturn '恢复下载'\n\t\t},\n\t\tisNeedRetryChips(){\n\t\t\tif (this.task.chipArray.some(chip => chip.status === Status.Fail))\n\t\t\t\treturn true\n\t\t\treturn false\n\t\t}\n\t},\n\tsetup(props) {\n\t\tconst { task, manager } = toRefs(props);\n\t\tconst m3u8Parser = new Parser();\n\t\tconst hours = ref(0);\n\t\tconst minutes = ref(0);\n\t\tconst seconds = ref(0);\n\t\tconst taskStatusClass = ref(''); // 控制任务的状态显示\n\t\tconst isShowEncryptedBadge = ref(false); // 显示任务是否加密\n\t\tconst isShowDetail = ref(false); // 控制任务的详情显示\n\t\tconst isUseMP4Format = ref(true) // 是否保存为 mp4 格式\n\t\tconst isSaveWhileDownloading = ref(streamsaver.supported) // 是否开启边下载边保存功能\n\t\tconst isStarted = ref(false) // 是否已经开始下载\n\t\tconst isRunning = ref(false) // 是否正在下载\n\n\t\t// 完善任务信息\n\t\tconst getTaskDetail = () => {\n\t\t\tconst rawM3u8Data = task.value.content;\n\n\t\t\t// 解析m3u8文件内容并获取片段信息\n\t\t\tm3u8Parser.push(rawM3u8Data);\n\t\t\tm3u8Parser.end();\n\t\t\tconst m3u8 = m3u8Parser.manifest;\n\t\t\tconst segments = m3u8.segments as any[];\n\n\t\t\t// 如果无ts片段, 则显示失败\n\t\t\tif (segments.length === 0) {\n\t\t\t\ttask.value.status = Status.Fail;\n\t\t\t\tconsole.error(`任务${task.value.name}没有检测到ts片段!`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 计算时长\n\t\t\tconst totalDuration = segments.reduce(\n\t\t\t\t(prevDuration, seg) => prevDuration + seg.duration || 0,\n\t\t\t\t0\n\t\t\t);\n\t\t\ttask.value.duration = totalDuration;\n\t\t\thours.value = Math.floor(totalDuration / 3600);\n\t\t\tminutes.value = Math.floor((totalDuration - hours.value * 3600) / 60);\n\t\t\tseconds.value = Math.ceil(\n\t\t\t\ttotalDuration - hours.value * 3600 - minutes.value * 60\n\t\t\t);\n\n\t\t\t// 检查是否存在AES加密\n\t\t\tif (rawM3u8Data.indexOf('#EXT-X-KEY') > -1) isShowEncryptedBadge.value = true;\n\n\t\t\t// 获取ts片段信息\n\t\t\tsegments.forEach((seg, offset) => {\n\t\t\t\tconst chip: Chip = reactive({\n\t\t\t\t\turl: applyURL(seg.uri, task.value.url),\n\t\t\t\t\tstatus: Status.Ready,\n\t\t\t\t\tdata: null,\n\t\t\t\t\toffset,\n\t\t\t\t\taes: seg.key ? { method: seg.key.method || '',\n\t\t\t\t\t\t\t\t\t\turi: seg.key.uri || '',\n\t\t\t\t\t\t\t\t\t\tiv: seg.iv ? seg.iv.buffer : getDefaultIVArrayBuffer(offset),\n\t\t\t\t\t\t\t\t\t\tkey: null }: null,\n\t\t\t\t});\n\t\t\t\ttask.value.chipArray.push(chip);\n\t\t\t});\n\n\t\t\t// 任务已经准备好了\n\t\t\ttask.value.status = Status.Ready;\n\t\t};\n\n\t\t// 准备好开始下载ts片段的一切前提: 获取m3u8文件内容, 计算时长, 获取片段信息等\n\t\tconst ready = async () => {\n\t\t\tif (task.value.content) getTaskDetail();\n\t\t\telse\n\t\t\t\trequest(task.value.url, {\n\t\t\t\t\tsuccess(data) {\n\t\t\t\t\t\tconst rawContent = data as string;\n\t\t\t\t\t\ttask.value.content = rawContent;\n\t\t\t\t\t\tgetTaskDetail();\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\ttask.value.status = Status.Fail;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t};\n\n\t\t// 任务创建后马上进行准备\n\t\tonMounted(ready);\n\n\t\t// 当任务准备失败后, 重新进行准备\n\t\tconst retryTask = () => {\n\t\t\tif (task.value.status === Status.Fail) {\n\t\t\t\ttask.value.status = Status.Loading;\n\t\t\t\tready();\n\t\t\t}\n\t\t};\n\n\t\t// 开始下载ts片段\n\t\tconst startTask = () => {\n\t\t\tisStarted.value = true\n\t\t\tisRunning.value = true\n\n\t\t\t// 是否保存为 mp4 格式\n\t\t\ttask.value.isUseMP4Format = isUseMP4Format.value\n\n\t\t\t// 是否边下载边保存\n\t\t\tif(isSaveWhileDownloading.value){\n\t\t\t\tstreamsaver.mitm = \"./mitm.html\"\n\t\t\t\tconst filename = task.value.name + (isUseMP4Format.value ? '.mp4' : '.ts')\n\t\t\t\ttask.value.stream = {\n\t\t\t\t\twriter: streamsaver.createWriteStream(filename).getWriter(),\n\t\t\t\t\tindex: 0,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 向管理器提交下载ts片段的任务\n\t\t\ttask.value.chipArray.forEach(chip =>\n\t\t\t\tmanager.value.submit(createChipTask(chip, task.value))\n\t\t\t);\n\t\t};\n\n\t\t// 暂停任务\n\t\tconst pauseTask = () => {\n\t\t\tisRunning.value = false\n\t\t\tprops.manager.pauseTask(task.value.id)\n\t\t}\n\n\t\t// 恢复任务\n\t\tconst restoreTask = () => {\n\t\t\tisRunning.value = true\n\t\t\tprops.manager.restoreTask(task.value.id)\n\t\t}\n\n\t\tconst handleSPRBtn = () => {\n\t\t\tif(!isStarted.value) startTask()\n\t\t\telse if(isRunning.value) pauseTask()\n\t\t\telse restoreTask()\n\t\t}\n\n\t\t// 重试某个错误片段\n\t\tconst retryChip = (chip: Chip) => {\n\t\t\tif (chip.status === Status.Fail) {\n\t\t\t\tchip.status = Status.Ready;\n\t\t\t\tprops.manager.submit(createChipTask(chip, task.value));\n\t\t\t}\n\t\t};\n\n\t\t// 重试所有错误片段\n\t\tconst retryAllChips = () => {\n\t\t\ttask.value.chipArray.forEach(chip => retryChip(chip))\n\t\t};\n\n\t\t// 保存已下载的片段\n\t\tconst saveChips = () => {\n\t\t\tstoreChips(\n\t\t\t\ttask.value.chipArray.map(chip => chip.data as ArrayBuffer),\n\t\t\t\ttask.value.name,\n\t\t\t\ttask.value.isUseMP4Format,\n\t\t\t);\n\t\t};\n\n\t\t// 监视任务状态\n\t\twatchEffect(() => {\n\t\t\tconst status = task.value.status;\n\t\t\tconst chipArray = task.value.chipArray;\n\t\t\tif (status === Status.Ready) {\n\t\t\t\ttaskStatusClass.value = 'badge bg-primary';\n\t\t\t\tif (\n\t\t\t\t\tchipArray.length > 0 &&\n\t\t\t\t\tchipArray.every(chip => chip.status === Status.Ok)\n\t\t\t\t) {\n\t\t\t\t\ttask.value.status = Status.Ok;\n\t\t\t\t\ttaskStatusClass.value = 'badge bg-success';\n\t\t\t\t\tisRunning.value = false\n\t\t\t\t\tif(!isSaveWhileDownloading.value) saveChips();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status === Status.Fail) {\n\t\t\t\ttaskStatusClass.value = 'badge bg-danger cursor';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status === Status.Loading) {\n\t\t\t\ttaskStatusClass.value = 'badge bg-secondary';\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\thandleSPRBtn,\n\t\t\tsaveChips,\n\t\t\tretryChip,\n\t\t\tretryAllChips,\n\t\t\tretryTask,\n\t\t\tisStarted,\n\t\t\tisRunning,\n\t\t\tisShowDetail,\n\t\t\tisShowEncryptedBadge,\n\t\t\tisUseMP4Format,\n\t\t\tisSaveWhileDownloading,\n\t\t\ttaskStatusClass,\n\t\t\thours,\n\t\t\tminutes,\n\t\t\tseconds,\n\t\t\tStatus,\n\t\t};\n\t},\n});\n","import { render } from \"./Task.vue?vue&type=template&id=335c5ce9&scoped=true&ts=true\"\nimport script from \"./Task.vue?vue&type=script&lang=ts\"\nexport * from \"./Task.vue?vue&type=script&lang=ts\"\n\nimport \"./Task.vue?vue&type=style&index=0&id=335c5ce9&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\Involution Space\\\\something\\\\m3u8_downloader\\\\self\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-335c5ce9\"]])\n\nexport default __exports__","interface TaskType {\n\t(): Promise<void>;\n\tid: number;\n}\n\nlet taskQueue: Array<TaskType> = [];\nconst pausedTaskIDs: Array<number> = [];\n\nclass Worker {\n\t_timer: number | undefined = undefined;\n\tisPaused = false;\n\tconstructor() {\n\t\tthis._work();\n\t}\n\tasync _work() {\n\t\tif (this.isPaused) return;\n\t\tif (taskQueue.length > 0) {\n\t\t\tconst task = taskQueue.shift() as TaskType;\n\t\t\tif (pausedTaskIDs.findIndex(v => v === task.id) >= 0) {\n\t\t\t\ttaskQueue.push(task);\n\t\t\t\tthis._wait();\n\t\t\t} else {\n\t\t\t\tawait task();\n\t\t\t\tthis._work();\n\t\t\t}\n\t\t} else this._wait();\n\t}\n\t_wait(seconds = 1) {\n\t\tclearTimeout(this._timer);\n\t\tthis._timer = setTimeout(() => {\n\t\t\tthis._work();\n\t\t}, 1000 * seconds);\n\t}\n\t_run() {\n\t\tclearTimeout(this._timer);\n\t\tthis.isPaused = false;\n\t\tthis._work();\n\t}\n\t_stop() {\n\t\tclearTimeout(this._timer);\n\t\tthis.isPaused = true;\n\t}\n}\n\nclass Manager {\n\tworkerCount: number;\n\tworkers: Worker[] = [];\n\tconstructor(workerCount = 10) {\n\t\tthis.workerCount = workerCount;\n\t\tfor (let i = this.workerCount; i--; ) this.workers.push(new Worker());\n\t}\n\tsubmit(task: TaskType) {\n\t\ttaskQueue.push(task);\n\t}\n\tpauseTask(id: number) {\n\t\tpausedTaskIDs.push(id);\n\t}\n\trestoreTask(id: number) {\n\t\tconst idx = pausedTaskIDs.findIndex(v => v === id);\n\t\tpausedTaskIDs.splice(idx, 1);\n\t}\n\tstopWorkers() {\n\t\tthis.workers.forEach(worker => worker._stop());\n\t}\n\trunWorkers() {\n\t\tthis.workers.forEach(worker => worker._run());\n\t}\n\tremove(id: number) {\n\t\ttaskQueue = taskQueue.filter(task => task.id !== id);\n\t}\n\tadjust(workerCount: number) {\n\t\tif (workerCount <= 0) return;\n\t\tif (this.workers.length === workerCount) return;\n\t\tthis.workerCount = workerCount;\n\t\tif (workerCount > this.workers.length) {\n\t\t\tconst count = workerCount - this.workers.length;\n\t\t\tfor (let i = count; i--; ) {\n\t\t\t\tthis.workers.push(new Worker());\n\t\t\t\tconsole.info('A worker joins.');\n\t\t\t}\n\t\t} else {\n\t\t\tconst count = this.workers.length - workerCount;\n\t\t\tfor (let i = count; i--; ) {\n\t\t\t\tconst worker = this.workers.pop() as Worker;\n\t\t\t\tworker._stop();\n\t\t\t\tconsole.info('A worker leaved.');\n\t\t\t}\n\t\t}\n\t}\n\tisWorking() {\n\t\treturn taskQueue.length > 0;\n\t}\n}\n\nexport default Manager;\n","\nimport { defineComponent, inject, ref } from 'vue';\nimport TaskComp from './Task.vue';\n\nimport { Status, Chip, Task } from '../types';\n\nimport Manager from '../util/manager';\nimport createChipTask from '../util/createChipTask';\n\nexport default defineComponent({\n\tcomponents: { TaskComp },\n\tmethods: {\n\t\tadjustWorkerCount() {\n\t\t\tif (typeof this.workerCount === 'number')\n\t\t\t\tthis.manager.adjust(this.workerCount);\n\t\t\telse {\n\t\t\t\tthis.workerCount = 10;\n\t\t\t\tthis.manager.adjust(10);\n\t\t\t}\n\t\t},\n\t},\n\tsetup() {\n\t\tconst taskList = inject('taskList') as Task[];\n\t\tconst workerCount = ref(10);\n\t\tconst manager = new Manager(workerCount.value); // 创建片段下载管理\n\n\t\t// 暂停和开始管理器\n\t\tconst isRunning = ref(true);\n\t\tconst changeWorkerStatus = () => {\n\t\t\tif (isRunning.value) manager.stopWorkers();\n\t\t\telse manager.runWorkers();\n\t\t\tisRunning.value = !isRunning.value;\n\t\t};\n\n\t\t// 删除任务\n\t\tconst remove = (id: number) => {\n\t\t\tmanager.remove(id);\n\t\t\tconst index = taskList.findIndex(task => task.id === id);\n\t\t\tconst task = taskList[index];\n\t\t\tif (task.stream) task.stream.writer.abort();\n\t\t\ttask.chipArray.forEach(chip => (chip.data = null));\n\t\t\ttaskList.splice(index, 1);\n\t\t};\n\n\t\t// 重新下载所有错误片段\n\t\tconst isRetring = ref(false);\n\t\tlet timer: number | undefined = undefined;\n\t\tconst autoRetryAll = () => {\n\t\t\tif (!isRetring.value)\n\t\t\t\ttimer = setInterval(() => {\n\t\t\t\t\ttaskList.forEach((task: Task) => {\n\t\t\t\t\t\ttask.chipArray.forEach((chip: Chip) => {\n\t\t\t\t\t\t\tif (chip.status === Status.Fail) {\n\t\t\t\t\t\t\t\tchip.status = Status.Ready;\n\t\t\t\t\t\t\t\tmanager.submit(createChipTask(chip, task));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}, 2000);\n\t\t\telse clearInterval(timer);\n\t\t\tisRetring.value = !isRetring.value;\n\t\t};\n\n\t\twindow.onunload = () => {\n\t\t\ttaskList.forEach(task => {\n\t\t\t\tif (task.stream) task.stream.writer.abort();\n\t\t\t});\n\t\t};\n\n\t\twindow.onbeforeunload = evt => {\n\t\t\tif (manager.isWorking()) evt.returnValue = 'Are you sure you want to leave?';\n\t\t};\n\n\t\treturn {\n\t\t\ttaskList,\n\t\t\tworkerCount,\n\t\t\tmanager,\n\t\t\tisRunning,\n\t\t\tisRetring,\n\t\t\tchangeWorkerStatus,\n\t\t\tautoRetryAll,\n\t\t\tremove,\n\t\t};\n\t},\n});\n","import { render } from \"./List.vue?vue&type=template&id=459b8f5a&scoped=true&ts=true\"\nimport script from \"./List.vue?vue&type=script&lang=ts\"\nexport * from \"./List.vue?vue&type=script&lang=ts\"\n\nimport \"./List.vue?vue&type=style&index=0&id=459b8f5a&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\Involution Space\\\\something\\\\m3u8_downloader\\\\self\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-459b8f5a\"]])\n\nexport default __exports__","\nimport { defineComponent, reactive, provide } from 'vue';\nimport Add from './components/Add.vue';\nimport List from './components/List.vue';\nimport { Task } from './types';\n\nexport default defineComponent({\n\tcomponents: { Add, List },\n\tsetup() {\n\t\tconst taskList = reactive<Task[]>([]);\n\t\tprovide('taskList', taskList);\n\t},\n});\n","import { render } from \"./App.vue?vue&type=template&id=412c04ed&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=412c04ed&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\Involution Space\\\\something\\\\m3u8_downloader\\\\self\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-412c04ed\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=412c04ed&scoped=true&lang=css\""],"sourceRoot":""}